import{p as b,r as c,j as e,B as n,T as s,t as x,q as S,C as f,ae as W,ab as w}from"./index-Idy1NCQZ.js";import{a as j}from"./addressApi-CFRSAVlm.js";import{u as T}from"./addressStore-D5c4QXW1.js";import{C as A,a as C}from"./CardContent-5_xtjPDw.js";import{A as y}from"./Add-CFf7PY0f.js";import{A as E}from"./Alert-Cw7awSGM.js";import{G as g}from"./Grid-CQRQWomO.js";function R({address:r,onEdit:m,onDelete:i,onUpdate:d}){b();const[t,o]=c.useState(!1),h=async()=>{if(window.confirm("Apakah Anda yakin ingin menghapus alamat ini?"))try{o(!0),(await j.deleteAddress(r.id)).success&&(i(r),d())}catch(l){console.error("Error deleting address:",l),alert(l.response?.data?.error||"Gagal menghapus alamat")}finally{o(!1)}};return e.jsx(A,{sx:{borderRadius:2,boxShadow:"0 1px 3px rgba(0,0,0,0.1)",height:"100%",display:"flex",flexDirection:"column"},children:e.jsxs(C,{sx:{p:3,flexGrow:1},children:[e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,color:"text.primary"},children:"Alamat Utama"}),r.is_primary&&e.jsx(n,{sx:{backgroundColor:"primary.main",color:"white",px:1,py:.5,borderRadius:1,fontSize:"0.75rem",fontWeight:600},children:"Default"})]}),e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:2},children:r.address_line}),e.jsxs(s,{variant:"body2",color:"text.secondary",sx:{mb:2},children:[r.city,", ",r.province," ",r.postal_code]}),e.jsxs(n,{sx:{display:"flex",gap:1,mt:"auto"},children:[e.jsx(x,{variant:"outlined",size:"small",onClick:()=>m(r),sx:{borderRadius:2,textTransform:"none",fontWeight:500,fontSize:"0.75rem"},children:"Edit"}),!r.is_primary&&e.jsx(x,{variant:"outlined",color:"error",size:"small",onClick:h,disabled:t,sx:{borderRadius:2,textTransform:"none",fontWeight:500,fontSize:"0.75rem"},children:"Hapus"})]})]})})}function q(){b();const r=S(),[m,i]=c.useState(!0),[d,t]=c.useState(null),{addresses:o,setAddresses:h,addAddress:l,updateAddress:D,removeAddress:z}=T(),p=async()=>{try{i(!0),t(null);const a=await j.getAddresses();a.success?h(a.data):t("Gagal memuat alamat")}catch(a){console.error("Error fetching addresses:",a),t(a.response?.data?.error||"Gagal memuat alamat")}finally{i(!1)}},u=()=>{r("/addresses/add")},v=a=>{r(`/addresses/${a.id}/edit`)},k=a=>{p()};return c.useEffect(()=>{p()},[]),m?e.jsx(f,{maxWidth:"xl",sx:{py:4},children:e.jsx(n,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(W,{})})}):e.jsxs(f,{maxWidth:"xl",sx:{py:4},children:[e.jsxs(n,{sx:{mb:4},children:[e.jsx(s,{variant:"h4",component:"h1",sx:{fontWeight:600,color:"text.primary",mb:1},children:"Alamat Saya"}),e.jsx(s,{variant:"body1",color:"text.secondary",children:"Kelola alamat pengiriman Anda"})]}),e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,color:"text.primary"},children:"Daftar Alamat"}),e.jsx(x,{variant:"contained",startIcon:e.jsx(y,{}),onClick:u,sx:{borderRadius:2,textTransform:"none",fontWeight:500,backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"}},children:"Tambah Alamat"})]}),d&&e.jsx(E,{severity:"error",sx:{mb:3,borderRadius:2},onClose:()=>t(null),children:d}),o.length===0?e.jsx(A,{sx:{borderRadius:2,boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:e.jsxs(C,{sx:{p:4,textAlign:"center"},children:[e.jsx(w,{sx:{fontSize:64,color:"text.secondary",mb:2}}),e.jsx(s,{variant:"h6",sx:{fontWeight:600,color:"text.primary",mb:1},children:"Belum Ada Alamat"}),e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Tambahkan alamat untuk memudahkan proses checkout"}),e.jsx(x,{variant:"contained",startIcon:e.jsx(y,{}),onClick:u,sx:{borderRadius:2,textTransform:"none",fontWeight:500,backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"}},children:"Tambah Alamat Pertama"})]})}):e.jsx(g,{container:!0,spacing:3,children:o.map(a=>e.jsx(g,{item:!0,xs:12,md:6,children:e.jsx(R,{address:a,onEdit:v,onDelete:k,onUpdate:p})},a.id))})]})}export{q as default};
