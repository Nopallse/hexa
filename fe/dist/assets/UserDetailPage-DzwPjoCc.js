import{c as B,j as e,a8 as z,q as W,r as c,af as w,C as d,B as t,t as m,A as T,T as s,w as A,N as h,$ as U,a0 as j,az as u,H as L,a2 as g,G as E,ac as H,x as G,ax as K}from"./index-sTH-7xwR.js";import{u as R,A as M}from"./userApi-DsOYB5M3.js";import{A as p}from"./ArrowBack-CXOXat9S.js";import{A as S}from"./Alert-B0PlZ22k.js";import{G as n}from"./Grid-CNdzohqz.js";import{C as y,a as f}from"./CardContent-CbD_XzoO.js";import{C as N}from"./CalendarToday-DqxskO7H.js";import{H as O}from"./Home-BBPE8n5d.js";import{O as V}from"./Receipt-DhYTCTd0.js";const q=B(e.jsx("path",{d:"M21 18v1c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2V5c0-1.1.89-2 2-2h14c1.1 0 2 .9 2 2v1h-9c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2zm-9-2h10V8H12zm4-2.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"AccountBalanceWallet");function se(){const{id:l}=z(),x=W(),[r,C]=c.useState(null),[_,b]=c.useState(!0),[v,I]=c.useState(null);c.useEffect(()=>{l&&k(l)},[l]);const k=async a=>{try{b(!0),I(null);const o=await R.getUserById(a);if(o.success)C(o.data);else throw new Error("Failed to fetch user detail")}catch(o){I(o.message||"Gagal memuat detail pengguna")}finally{b(!1)}},i=a=>new Date(a).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),D=a=>a==="admin"?"error":"default",P=a=>a==="admin"?e.jsx(M,{}):e.jsx(K,{});return _?e.jsx(w,{message:"Memuat detail pengguna..."}):v?e.jsxs(d,{maxWidth:!1,children:[e.jsx(t,{sx:{mb:3},children:e.jsx(m,{startIcon:e.jsx(p,{}),onClick:()=>x("/admin/users"),sx:{mb:2},children:"Kembali ke Daftar Pengguna"})}),e.jsx(S,{severity:"error",children:v})]}):r?e.jsxs(d,{maxWidth:!1,children:[e.jsxs(t,{sx:{mb:4},children:[e.jsx(m,{startIcon:e.jsx(p,{}),onClick:()=>x("/admin/users"),sx:{mb:2},children:"Kembali ke Daftar Pengguna"}),e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:3},children:[e.jsx(T,{sx:{width:80,height:80,bgcolor:"primary.main",fontSize:"2rem"},children:r.full_name.charAt(0).toUpperCase()}),e.jsxs(t,{children:[e.jsx(s,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:r.full_name}),e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[e.jsx(A,{icon:P(r.role),label:r.role==="admin"?"Admin":"User",color:D(r.role),size:"medium"}),e.jsxs(s,{variant:"body2",color:"textSecondary",children:["Bergabung: ",i(r.created_at)]})]}),e.jsxs(s,{variant:"body2",color:"textSecondary",children:["Terakhir diupdate: ",i(r.updated_at)]})]})]})]}),e.jsxs(n,{container:!0,spacing:3,children:[e.jsx(n,{xs:12,md:6,children:e.jsx(y,{children:e.jsxs(f,{children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Informasi Pengguna"}),e.jsx(h,{sx:{mb:2}}),e.jsxs(U,{children:[e.jsxs(j,{children:[e.jsx(u,{children:e.jsx(L,{color:"primary"})}),e.jsx(g,{primary:"Email",secondary:r.email})]}),r.phone&&e.jsxs(j,{children:[e.jsx(u,{children:e.jsx(E,{color:"primary"})}),e.jsx(g,{primary:"Telepon",secondary:r.phone})]}),e.jsxs(j,{children:[e.jsx(u,{children:e.jsx(N,{color:"primary"})}),e.jsx(g,{primary:"Tanggal Dibuat",secondary:i(r.created_at)})]})]})]})})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(y,{children:e.jsxs(f,{children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Statistik Pengguna"}),e.jsx(h,{sx:{mb:2}}),e.jsxs(n,{container:!0,spacing:2,children:[e.jsx(n,{item:!0,xs:6,children:e.jsxs(t,{sx:{textAlign:"center",p:2},children:[e.jsx(O,{color:"primary",sx:{fontSize:40,mb:1}}),e.jsx(s,{variant:"h4",fontWeight:"bold",children:r._count?.addresses||0}),e.jsx(s,{variant:"body2",color:"textSecondary",children:"Alamat"})]})}),e.jsx(n,{item:!0,xs:6,children:e.jsxs(t,{sx:{textAlign:"center",p:2},children:[e.jsx(H,{color:"primary",sx:{fontSize:40,mb:1}}),e.jsx(s,{variant:"h4",fontWeight:"bold",children:r._count?.cart_items||0}),e.jsx(s,{variant:"body2",color:"textSecondary",children:"Item Keranjang"})]})}),e.jsx(n,{item:!0,xs:6,children:e.jsxs(t,{sx:{textAlign:"center",p:2},children:[e.jsx(V,{color:"primary",sx:{fontSize:40,mb:1}}),e.jsx(s,{variant:"h4",fontWeight:"bold",children:r._count?.orders||0}),e.jsx(s,{variant:"body2",color:"textSecondary",children:"Pesanan"})]})}),e.jsx(n,{item:!0,xs:6,children:e.jsxs(t,{sx:{textAlign:"center",p:2},children:[e.jsx(q,{color:"primary",sx:{fontSize:40,mb:1}}),e.jsx(s,{variant:"h4",fontWeight:"bold",children:r._count?.transactions||0}),e.jsx(s,{variant:"body2",color:"textSecondary",children:"Transaksi"})]})})]})]})})}),r.addresses&&r.addresses.length>0&&e.jsx(n,{item:!0,xs:12,children:e.jsx(y,{children:e.jsxs(f,{children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Alamat Pengguna"}),e.jsx(h,{sx:{mb:2}}),e.jsx(n,{container:!0,spacing:2,children:r.addresses.map(a=>e.jsx(n,{item:!0,xs:12,md:6,children:e.jsxs(G,{sx:{p:2,bgcolor:a.is_primary?"primary.light":"grey.50"},children:[e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[e.jsx(s,{variant:"subtitle2",fontWeight:"medium",children:a.is_primary?"Alamat Utama":"Alamat Tambahan"}),a.is_primary&&e.jsx(A,{label:"Utama",size:"small",color:"primary"})]}),e.jsx(s,{variant:"body2",sx:{mb:1},children:a.address_line}),e.jsxs(s,{variant:"body2",color:"textSecondary",children:[a.city,", ",a.province," ",a.postal_code]}),e.jsxs(s,{variant:"caption",color:"textSecondary",sx:{mt:1,display:"block"},children:["Dibuat: ",i(a.created_at)]})]})},a.id))})]})})})]})]}):e.jsxs(d,{maxWidth:!1,children:[e.jsx(t,{sx:{mb:3},children:e.jsx(m,{startIcon:e.jsx(p,{}),onClick:()=>x("/admin/users"),sx:{mb:2},children:"Kembali ke Daftar Pengguna"})}),e.jsx(S,{severity:"warning",children:"Pengguna tidak ditemukan"})]})}export{se as default};
