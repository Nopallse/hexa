import{p as N,a8 as F,q as B,aB as T,r as m,j as e,ag as L,C as v,t as k,B as c,an as _,ah as S,T as r,x as i,S as o,w as p,aA as O,aq as U,E as $}from"./index-CLjvjqZT.js";import{a as E}from"./paymentApi-C7iOXclS.js";import{u as G}from"./useCurrencyConversion-DcYLh6Vv.js";import{b as q}from"./image-CeHRN-zl.js";import{A as w}from"./Alert-Cs6zeJMp.js";import{A as W}from"./ArrowBack-DbsPIT4g.js";import{B as H}from"./Breadcrumbs-CIb5IDov.js";import{H as M}from"./Home-BS3p-bFf.js";import{G as n}from"./Grid-Yhwe_G7n.js";import{C as h,a as u}from"./CardContent-Dqpv-NXF.js";import{O as K}from"./Receipt-DjzIlEy0.js";import{A as J}from"./Avatar-B6RLlSql.js";import"./useSlot-CDkgSjON.js";const I=s=>{switch(s?.toLowerCase()){case"paid":return"success";case"pending":return"warning";case"failed":case"cancelled":return"error";case"refunded":return"info";default:return"default"}},C=s=>{switch(s?.toLowerCase()){case"paid":return"Lunas";case"pending":return"Pending";case"failed":return"Gagal";case"refunded":return"Dikembalikan";case"cancelled":return"Dibatalkan";default:return s||"Unknown"}},Q=s=>{switch(s?.toLowerCase()){case"midtrans":return"Midtrans";case"paypal":return"PayPal";case"transfer":return"Transfer";case"e-wallet":return"E-Wallet";case"cod":return"COD";default:return s||"Unknown"}},Y=s=>{switch(s){case"belum_bayar":return"warning";case"dikemas":return"primary";case"dikirim":return"info";case"diterima":return"success";case"dibatalkan":return"error";default:return"default"}},V=s=>{switch(s){case"belum_bayar":return"Belum Bayar";case"dikemas":return"Dikemas";case"dikirim":return"Dikirim";case"diterima":return"Diterima";case"dibatalkan":return"Dibatalkan";default:return s}};function me(){const s=N(),{id:y}=F(),l=B(),{showNotification:X}=T(),{formatPrice:d}=G(),[a,P]=m.useState(null),[R,g]=m.useState(!0),[x,b]=m.useState(null),j=t=>t?new Date(t).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",z=async()=>{if(y)try{g(!0),b(null);const t=await E.getPaymentById(y);t.success&&t.data?P(t.data):b(t.error||"Gagal memuat data pembayaran")}catch(t){b(t.response?.data?.error||"Gagal memuat data pembayaran")}finally{g(!1)}};return m.useEffect(()=>{z()},[y]),R?e.jsx(L,{message:"Memuat data pembayaran..."}):x&&!a?e.jsxs(v,{maxWidth:"xl",sx:{py:4},children:[e.jsx(w,{severity:"error",sx:{mb:3},children:x}),e.jsx(k,{startIcon:e.jsx(W,{}),onClick:()=>l("/admin/payments"),children:"Kembali ke Daftar Pembayaran"})]}):a?e.jsx(c,{sx:{bgcolor:"grey.50",minHeight:"100vh",pb:4},children:e.jsxs(v,{maxWidth:"xl",sx:{py:4},children:[e.jsxs(H,{sx:{mb:2},children:[e.jsxs(_,{component:"button",variant:"body2",onClick:()=>l("/admin"),sx:{display:"flex",alignItems:"center",textDecoration:"none",color:"text.secondary","&:hover":{color:"primary.main"}},children:[e.jsx(M,{sx:{mr:.5,fontSize:"1rem"}}),"Dashboard"]}),e.jsxs(_,{component:"button",variant:"body2",onClick:()=>l("/admin/payments"),sx:{display:"flex",alignItems:"center",textDecoration:"none",color:"text.secondary","&:hover":{color:"primary.main"}},children:[e.jsx(S,{sx:{mr:.5,fontSize:"1rem"}}),"Pembayaran"]}),e.jsxs(r,{variant:"body2",color:"text.primary",fontWeight:500,children:["#",a.id.slice(-8).toUpperCase()]})]}),e.jsx(k,{startIcon:e.jsx(W,{}),onClick:()=>l("/admin/payments"),sx:{mb:3,borderRadius:2,fontWeight:500,color:"text.secondary","&:hover":{color:"primary.main",backgroundColor:"action.hover"}},children:"Kembali ke Daftar Pembayaran"}),e.jsx(i,{elevation:0,sx:{mb:3,borderRadius:3,overflow:"hidden",background:`linear-gradient(135deg, ${s.palette.primary.main}15 0%, ${s.palette.primary.light}08 100%)`,border:`1px solid ${s.palette.divider}`},children:e.jsxs(c,{sx:{p:4,pb:3},children:[e.jsxs(o,{direction:"row",alignItems:"center",spacing:2,sx:{mb:1.5},children:[e.jsxs(r,{variant:"h4",fontWeight:700,sx:{color:"text.primary"},children:["Payment #",a.id.slice(-8).toUpperCase()]}),e.jsx(p,{label:C(a.payment_status),color:I(a.payment_status),size:"small",sx:{height:28,fontWeight:600,fontSize:"0.75rem",textTransform:"uppercase",letterSpacing:.5}})]}),e.jsxs(r,{variant:"body2",color:"text.secondary",children:["Dibuat pada ",j(a.created_at)]})]})}),x&&e.jsx(w,{severity:"error",sx:{mb:3,borderRadius:2},children:x}),e.jsxs(n,{container:!0,spacing:3,children:[e.jsx(n,{item:!0,xs:12,lg:8,children:e.jsxs(o,{spacing:3,children:[e.jsx(h,{elevation:0,sx:{borderRadius:3,border:`1px solid ${s.palette.divider}`},children:e.jsxs(u,{sx:{p:3},children:[e.jsxs(o,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:3},children:[e.jsx(S,{color:"primary"}),e.jsx(r,{variant:"h6",fontWeight:700,children:"Informasi Pembayaran"})]}),e.jsxs(n,{container:!0,spacing:2,children:[e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsxs(i,{elevation:0,sx:{p:2,bgcolor:"grey.50",borderRadius:2},children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem",mb:.5,display:"block"},children:"Status"}),e.jsx(p,{label:C(a.payment_status),color:I(a.payment_status),size:"small",sx:{fontWeight:600}})]})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsxs(i,{elevation:0,sx:{p:2,bgcolor:"grey.50",borderRadius:2},children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem",mb:.5,display:"block"},children:"Metode Pembayaran"}),e.jsx(r,{variant:"body1",fontWeight:600,children:Q(a.payment_method)})]})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsxs(i,{elevation:0,sx:{p:2,bgcolor:"primary.light",borderRadius:2},children:[e.jsx(r,{variant:"caption",color:"primary.dark",sx:{fontSize:"0.75rem",mb:.5,display:"block",fontWeight:600},children:"Jumlah"}),e.jsx(r,{variant:"h6",fontWeight:700,color:"primary.main",children:d(parseFloat(a.amount||0))})]})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsxs(i,{elevation:0,sx:{p:2,bgcolor:"grey.50",borderRadius:2},children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem",mb:.5,display:"block"},children:"Currency"}),e.jsx(r,{variant:"body1",fontWeight:600,children:a.currency_code||"IDR"})]})}),a.payment_reference&&e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsxs(i,{elevation:0,sx:{p:2,bgcolor:"grey.50",borderRadius:2},children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem",mb:.5,display:"block"},children:"Payment Reference"}),e.jsx(r,{variant:"body1",sx:{fontFamily:"monospace",fontWeight:500},children:a.payment_reference})]})}),a.payment_date&&e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsxs(i,{elevation:0,sx:{p:2,bgcolor:"grey.50",borderRadius:2},children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem",mb:.5,display:"block"},children:"Tanggal Pembayaran"}),e.jsx(r,{variant:"body1",fontWeight:600,children:j(a.payment_date)})]})})]})]})}),a.order&&e.jsx(h,{elevation:0,sx:{borderRadius:3,border:`1px solid ${s.palette.divider}`},children:e.jsxs(u,{sx:{p:3},children:[e.jsxs(o,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:3},children:[e.jsx(K,{color:"primary"}),e.jsx(r,{variant:"h6",fontWeight:700,children:"Informasi Order"})]}),e.jsxs(n,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsxs(i,{elevation:0,sx:{p:2,bgcolor:"grey.50",borderRadius:2},children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem",mb:.5,display:"block"},children:"Order ID"}),e.jsx(r,{variant:"body1",fontWeight:600,sx:{fontFamily:"monospace"},children:a.order.id.slice(-8).toUpperCase()})]})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsxs(i,{elevation:0,sx:{p:2,bgcolor:"grey.50",borderRadius:2},children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem",mb:.5,display:"block"},children:"Status Order"}),e.jsx(p,{label:V(a.order.status),color:Y(a.order.status),size:"small",sx:{fontWeight:600}})]})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsxs(i,{elevation:0,sx:{p:2,bgcolor:"grey.50",borderRadius:2},children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem",mb:.5,display:"block"},children:"Total Amount"}),e.jsx(r,{variant:"body1",fontWeight:600,children:d(parseFloat(a.order.total_amount||0))})]})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsxs(i,{elevation:0,sx:{p:2,bgcolor:"grey.50",borderRadius:2},children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem",mb:.5,display:"block"},children:"Shipping Cost"}),e.jsx(r,{variant:"body1",fontWeight:600,children:d(parseFloat(a.order.shipping_cost||0))})]})})]}),a.order.order_items&&a.order.order_items.length>0&&e.jsxs(c,{children:[e.jsxs(o,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:3},children:[e.jsx(O,{color:"primary"}),e.jsxs(r,{variant:"h6",fontWeight:700,children:["Item Pesanan (",a.order.order_items.length,")"]})]}),e.jsx(o,{spacing:2,children:a.order.order_items.map(t=>{const f=t.product_variant?.product?.product_images?.[0]?.image_name;return e.jsxs(i,{elevation:0,sx:{display:"flex",alignItems:"center",gap:2,p:2.5,borderRadius:2,bgcolor:"grey.50",border:`1px solid ${s.palette.divider}`,transition:"all 0.2s ease","&:hover":{bgcolor:"grey.100",transform:"translateY(-2px)",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}},children:[e.jsx(J,{src:f?q(f):`https://placehold.co/80x80/9682DB/FFFFFF/png?text=${encodeURIComponent((t.product_variant?.product?.name||"N/A").substring(0,10))}`,alt:t.product_variant?.product?.name||"N/A",sx:{width:90,height:90,borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},variant:"rounded"}),e.jsxs(c,{sx:{flex:1,minWidth:0},children:[e.jsx(r,{variant:"subtitle1",fontWeight:600,sx:{mb:1,color:"text.primary",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",lineHeight:1.3},title:t.product_variant?.product?.name||"N/A",children:t.product_variant?.product?.name||"N/A"}),t.product_variant?.variant_options&&t.product_variant.variant_options.length>0&&e.jsx(o,{direction:"row",spacing:.5,sx:{mb:1,flexWrap:"wrap"},children:t.product_variant.variant_options.map((A,D)=>e.jsx(p,{label:A.option_value,size:"small",variant:"outlined",sx:{fontSize:"0.7rem",height:22,borderColor:"primary.main",color:"primary.main"}},D))}),e.jsxs(r,{variant:"body2",color:"text.secondary",children:["Qty: ",t.quantity," Ã— ",d(parseFloat(t.price||0))]})]}),e.jsxs(c,{sx:{textAlign:"right",minWidth:120},children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem",mb:.5,display:"block"},children:"Total"}),e.jsx(r,{variant:"h6",color:"primary.main",fontWeight:700,children:d(parseFloat(t.price||0)*t.quantity)})]})]},t.id)})})]})]})})]})}),e.jsx(n,{item:!0,xs:12,lg:4,children:e.jsxs(o,{spacing:3,children:[a.order?.user&&e.jsx(h,{elevation:0,sx:{borderRadius:3,border:`1px solid ${s.palette.divider}`},children:e.jsxs(u,{sx:{p:3},children:[e.jsxs(o,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:3},children:[e.jsx(U,{color:"primary"}),e.jsx(r,{variant:"h6",fontWeight:700,children:"Informasi Pelanggan"})]}),e.jsxs(n,{container:!0,spacing:2,children:[e.jsxs(n,{item:!0,xs:12,children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem",mb:.5,display:"block"},children:"Nama"}),e.jsx(r,{variant:"body1",fontWeight:600,children:a.order.user.full_name||"N/A"})]}),e.jsxs(n,{item:!0,xs:12,children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem",mb:.5,display:"block"},children:"Email"}),e.jsx(r,{variant:"body1",children:a.order.user.email||"N/A"})]}),a.order.user.phone&&e.jsxs(n,{item:!0,xs:12,children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem",mb:.5,display:"block"},children:"Telepon"}),e.jsx(r,{variant:"body1",children:a.order.user.phone})]})]})]})}),a.order?.address&&e.jsx(h,{elevation:0,sx:{borderRadius:3,border:`1px solid ${s.palette.divider}`},children:e.jsxs(u,{sx:{p:3},children:[e.jsxs(o,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:2},children:[e.jsx($,{color:"primary"}),e.jsx(r,{variant:"subtitle1",fontWeight:700,children:"Alamat Pengiriman"})]}),e.jsxs(i,{elevation:0,sx:{p:2,bgcolor:"grey.50",borderRadius:2},children:[e.jsx(r,{variant:"body1",fontWeight:600,sx:{mb:.5},children:a.order.address.recipient_name||"N/A"}),e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:a.order.address.address_line||"N/A"}),e.jsxs(r,{variant:"body2",color:"text.secondary",children:[a.order.address.city||"N/A",", ",a.order.address.province||"N/A"," ",a.order.address.postal_code||"N/A"]})]})]})})]})})]})]})}):null}export{me as default};
