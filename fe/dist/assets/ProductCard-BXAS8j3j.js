import{p as v,r as j,j as e,B as h,T as m}from"./index-CjRkbdsW.js";import{a as u}from"./image-CeHRN-zl.js";import{u as y}from"./useCurrencyConversion-CFRmtJpc.js";import{C as x,a as c}from"./CardContent-bGHhza-V.js";import{S as i}from"./Skeleton-t2nt6Xc3.js";import{C}from"./CardActionArea-D_RUClXI.js";function L({product:a,onView:d,loading:p=!1}){const s=v(),[n,t]=j.useState(!0),{formatPrice:g,formatPriceRange:f}=y(),o=a.product_images?.find(r=>r.is_primary)||a.product_images?.[0],l=a.product_variants&&a.product_variants.length>0;l&&(Math.min(...a.product_variants.map(r=>parseFloat(r.price))),Math.max(...a.product_variants.map(r=>parseFloat(r.price))));const b=()=>{d(a)};return p?e.jsx(x,{sx:{height:"100%",borderRadius:1.5},children:e.jsxs(c,{sx:{p:0},children:[e.jsx(i,{variant:"rectangular",height:200}),e.jsxs(h,{sx:{p:2},children:[e.jsx(i,{variant:"text",height:20,sx:{mb:1}}),e.jsx(i,{variant:"text",height:24})]})]})}):e.jsx(x,{sx:{height:"100%",borderRadius:1.5,overflow:"hidden",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",background:"#ffffff",border:`1px solid ${s.palette.grey[200]}`,boxShadow:"0 2px 8px rgba(0,0,0,0.08)","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 24px rgba(0,0,0,0.12)"}},onClick:b,children:e.jsxs(C,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(h,{sx:{position:"relative",height:200,overflow:"hidden",background:`linear-gradient(135deg, ${s.palette.primary.light}10, ${s.palette.secondary.light}10)`},children:[n&&e.jsx(i,{variant:"rectangular",width:"100%",height:"100%"}),o?e.jsx("img",{src:u(o.image_name),alt:a.name,style:{width:"100%",height:"100%",objectFit:"cover",display:n?"none":"block"},onLoad:()=>t(!1),onError:()=>t(!1)}):e.jsx("img",{src:`https://placehold.co/400x200/9682DB/FFFFFF/png?text=${encodeURIComponent(a.name)}`,alt:a.name,style:{width:"100%",height:"100%",objectFit:"cover",display:n?"none":"block"},onLoad:()=>t(!1),onError:()=>t(!1)})]}),e.jsxs(c,{sx:{p:2},children:[e.jsx(m,{variant:"subtitle1",fontWeight:600,sx:{mb:1,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",lineHeight:1.3},children:a.name}),e.jsx(m,{variant:"h6",fontWeight:700,color:"primary.main",sx:{fontSize:"1.1rem"},children:l?f(a.product_variants):g(parseFloat(a.price||"0"))})]})]})})}export{L as P};
