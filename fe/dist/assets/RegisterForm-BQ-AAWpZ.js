import{c as I,j as e,r as u,J as V,B as d,T as a,t as x,D as t,K as f,I as j}from"./index-CLjvjqZT.js";import{u as N,a as _,o as R,s as o}from"./schemas-DLfv8dIB.js";import{A as b}from"./Alert-Cs6zeJMp.js";import{V as k}from"./Visibility-Cu8UOJov.js";const w=I(e.jsx("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff"),z=R({email:o().min(1,"Email wajib diisi").email("Format email tidak valid"),password:o().min(8,"Password minimal 8 karakter").regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,"Password harus mengandung huruf kecil, huruf besar, dan angka"),full_name:o().min(1,"Nama lengkap wajib diisi").min(2,"Nama lengkap minimal 2 karakter"),phone:o().min(1,"Nomor telepon wajib diisi").regex(/^08[0-9]{8,11}$/,"Nomor telepon harus dimulai dengan 08 dan 10-13 digit"),confirmPassword:o().min(1,"Konfirmasi password wajib diisi")}).refine(i=>i.password===i.confirmPassword,{message:"Password tidak cocok",path:["confirmPassword"]});function M({onSuccess:i,onSwitchToLogin:h}){const[m,y]=u.useState(!1),[c,v]=u.useState(!1),[P,S]=u.useState(!1),{register:A,isLoading:s,error:p,requiresVerification:B}=V(),{register:n,handleSubmit:C,formState:{errors:r},getValues:T}=N({resolver:_(z)}),W=async l=>{try{const g={email:l.email,password:l.password,full_name:l.full_name,phone:l.phone};(await A(g)).success&&(S(!0),i&&i())}catch{}};return P||B?e.jsxs(d,{children:[e.jsxs(b,{severity:"success",sx:{mb:3},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Registrasi Berhasil!"}),e.jsxs(a,{variant:"body2",children:["Kami telah mengirimkan email verifikasi ke ",e.jsx("strong",{children:T("email")}),". Silakan cek email Anda dan klik link verifikasi untuk mengaktifkan akun."]})]}),e.jsxs(d,{sx:{textAlign:"center",mt:3},children:[e.jsx(a,{variant:"body2",sx:{mb:2},children:"Sudah verifikasi email?"}),e.jsx(x,{variant:"contained",onClick:h,fullWidth:!0,children:"Login Sekarang"})]})]}):e.jsxs(d,{component:"form",onSubmit:C(W),children:[e.jsx(a,{variant:"h4",gutterBottom:!0,textAlign:"center",fontWeight:"bold",children:"Daftar Akun Baru"}),e.jsx(a,{variant:"body2",textAlign:"center",color:"textSecondary",sx:{mb:4},children:"Bergabunglah dengan Hexa Crochet dan temukan produk rajutan terbaik"}),p&&e.jsx(b,{severity:"error",sx:{mb:3},children:p}),e.jsx(t,{...n("full_name"),label:"Nama Lengkap",fullWidth:!0,margin:"normal",error:!!r.full_name,helperText:r.full_name?.message,disabled:s}),e.jsx(t,{...n("email"),label:"Email",type:"email",fullWidth:!0,margin:"normal",error:!!r.email,helperText:r.email?.message,disabled:s}),e.jsx(t,{...n("phone"),label:"Nomor Telepon",fullWidth:!0,margin:"normal",error:!!r.phone,helperText:r.phone?.message,placeholder:"08xxxxxxxxxx",disabled:s}),e.jsx(t,{...n("password"),label:"Password",type:m?"text":"password",fullWidth:!0,margin:"normal",error:!!r.password,helperText:r.password?.message,disabled:s,InputProps:{endAdornment:e.jsx(f,{position:"end",children:e.jsx(j,{onClick:()=>y(!m),edge:"end",children:m?e.jsx(w,{}):e.jsx(k,{})})})}}),e.jsx(t,{...n("confirmPassword"),label:"Konfirmasi Password",type:c?"text":"password",fullWidth:!0,margin:"normal",error:!!r.confirmPassword,helperText:r.confirmPassword?.message,disabled:s,InputProps:{endAdornment:e.jsx(f,{position:"end",children:e.jsx(j,{onClick:()=>v(!c),edge:"end",children:c?e.jsx(w,{}):e.jsx(k,{})})})}}),e.jsx(x,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:s,sx:{mt:3,mb:2},children:s?"Mendaftar...":"Daftar"}),e.jsx(d,{sx:{textAlign:"center"},children:e.jsxs(a,{variant:"body2",children:["Sudah punya akun?"," ",e.jsx(x,{variant:"text",onClick:h,disabled:s,children:"Login di sini"})]})})]})}export{M as R,w as V};
