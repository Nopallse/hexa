import{q as C,a8 as E,aB as I,r as e,j as t,ag as w,C as l,T as n,an as m,aA as B,B as A,A as L}from"./index-tvCmUXkA.js";import{p as f}from"./productApi-uU0QhFhc.js";import{P as F}from"./ProductForm-DYzxff5A.js";import{A as W}from"./Alert-iJ2nvuQL.js";import{B as z}from"./Breadcrumbs-BRY0wQO3.js";import{H as D}from"./Home-FYrVyE1n.js";import"./schemas-DXr8hVXD.js";import"./ProductVariantManager-TIBheUgC.js";import"./CardContent-BO7gwO4c.js";import"./Add-DOZR1gGR.js";import"./Delete-n8OHpdJZ.js";import"./Tooltip-CRdXSvuP.js";import"./Popper-DMWFBkOI.js";import"./CloudUpload-CzVTKydN.js";import"./TableRow-Bx2Iwbxr.js";import"./Image-CNtbBRWI.js";import"./Edit-EiFO075a.js";import"./DialogTitle-yi9wgBEI.js";import"./DialogActions-Bmmc9LId.js";import"./image-CeHRN-zl.js";import"./Avatar-Cw6JEpzV.js";import"./useSlot-Dd61XFNI.js";import"./ProductImageManager-Cy2IzSFQ.js";import"./Star-DOsCIKRk.js";import"./CardMedia-BoJ7BMDL.js";import"./Info-Bhxc4y46.js";import"./Switch-CnptKaHY.js";import"./SwitchBase-nOO8HfEz.js";function mt(){const o=C(),{id:s}=E(),{showNotification:g}=I(),[a,x]=e.useState(null),[h,y]=e.useState([]),[b,c]=e.useState(!0),[j,u]=e.useState(!1),[d,i]=e.useState(null),k=async()=>{if(!s){i("ID produk tidak valid"),c(!1);return}try{c(!0),i(null);const r=await f.getProductById(s);if(r.success)x(r.data);else throw new Error("Failed to fetch product")}catch(r){i(r.message||"Gagal memuat data produk")}finally{c(!1)}},P=async()=>{try{const r=await L.getCategories();r.success&&y(r.data)}catch(r){console.error("Failed to fetch categories:",r)}};e.useEffect(()=>{k(),P()},[s]);const S=async r=>{if(s)try{if(u(!0),i(null),(await f.updateProduct(s,r)).success)g({type:"success",message:"Produk berhasil diperbarui"}),o("/admin/products");else throw new Error("Failed to update product")}catch(p){i(p.message||"Gagal memperbarui produk")}finally{u(!1)}},v=()=>{o("/admin/products")};return b?t.jsx(w,{message:"Memuat data produk..."}):d&&!a?t.jsxs(l,{maxWidth:!1,children:[t.jsx(W,{severity:"error",sx:{mb:3},children:d}),t.jsx(n,{variant:"body1",children:t.jsx(m,{component:"button",onClick:()=>o("/admin/products"),children:"Kembali ke daftar produk"})})]}):t.jsxs(l,{maxWidth:"lg",children:[t.jsxs(z,{sx:{mb:3},children:[t.jsxs(m,{component:"button",variant:"body2",onClick:()=>o("/admin"),sx:{display:"flex",alignItems:"center",gap:.5},children:[t.jsx(D,{fontSize:"small"}),"Dashboard"]}),t.jsxs(m,{component:"button",variant:"body2",onClick:()=>o("/admin/products"),sx:{display:"flex",alignItems:"center",gap:.5},children:[t.jsx(B,{fontSize:"small"}),"Produk"]}),t.jsxs(n,{variant:"body2",color:"textPrimary",children:["Edit ",a?.name]})]}),t.jsxs(A,{sx:{mb:4},children:[t.jsx(n,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:"Edit Produk"}),t.jsxs(n,{variant:"body1",color:"textSecondary",children:["Perbarui informasi produk ",a?.name]})]}),a&&t.jsx(F,{mode:"edit",product:a,categories:h,isLoading:j,error:d,onSubmit:S,onCancel:v})]})}export{mt as default};
