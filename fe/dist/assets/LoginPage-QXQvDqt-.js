import{r as g,a as v,g as S,j as e,B as o,T as i,h,I as k,i as A,b as d,D as P,C,P as L}from"./index-BNHkdQXN.js";import{u as T,a as B,o as D,s as p}from"./schemas-B-_fRkL-.js";import{A as I}from"./Alert-CGwzUP-j.js";import{V as W,R as E}from"./RegisterForm-BlakgVKL.js";import{V as F}from"./Visibility-pX7bN8d5.js";const R=D({email:p().min(1,"Email wajib diisi").email("Format email tidak valid"),password:p().min(1,"Password wajib diisi")});function V({onSuccess:a,onSwitchToRegister:r}){const[n,j]=g.useState(!1),l=v(),{login:b,isLoading:s,error:m,user:M,clearError:f}=S(),{register:c,handleSubmit:w,formState:{errors:t}}=T({resolver:B(R)}),y=async x=>{f();try{const u={email:x.email,password:x.password};(await b(u)).role==="admin"?l("/admin"):l("/"),a&&a()}catch{}};return e.jsxs(o,{component:"form",onSubmit:w(y),children:[e.jsx(i,{variant:"h4",gutterBottom:!0,textAlign:"center",fontWeight:"bold",children:"Masuk ke Akun"}),e.jsx(i,{variant:"body2",textAlign:"center",color:"textSecondary",sx:{mb:4},children:"Selamat datang kembali di Hexa Crochet"}),m&&e.jsx(I,{severity:"error",sx:{mb:3},children:m}),e.jsx(h,{...c("email"),label:"Email",type:"email",fullWidth:!0,margin:"normal",error:!!t.email,helperText:t.email?.message,disabled:s,autoComplete:"email"}),e.jsx(h,{...c("password"),label:"Password",type:n?"text":"password",fullWidth:!0,margin:"normal",error:!!t.password,helperText:t.password?.message,disabled:s,autoComplete:"current-password",InputProps:{endAdornment:e.jsx(k,{position:"end",children:e.jsx(A,{onClick:()=>j(!n),edge:"end",children:n?e.jsx(W,{}):e.jsx(F,{})})})}}),e.jsx(o,{sx:{textAlign:"right",mt:1,mb:3},children:e.jsx(d,{variant:"text",size:"small",onClick:()=>l("/forgot-password"),disabled:s,children:"Lupa Password?"})}),e.jsx(d,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:s,sx:{mb:3},children:s?"Masuk...":"Masuk"}),e.jsx(P,{sx:{my:3},children:e.jsx(i,{variant:"body2",color:"textSecondary",children:"atau"})}),e.jsxs(o,{sx:{textAlign:"center"},children:[e.jsx(i,{variant:"body2",sx:{mb:2},children:"Belum punya akun?"}),e.jsx(d,{variant:"outlined",fullWidth:!0,onClick:r,disabled:s,children:"Daftar Sekarang"})]})]})}function J(){const[a,r]=g.useState(!0);return e.jsx(C,{maxWidth:"sm",sx:{py:8},children:e.jsx(L,{elevation:3,sx:{p:4},children:e.jsx(o,{children:a?e.jsx(V,{onSwitchToRegister:()=>r(!1)}):e.jsx(E,{onSwitchToLogin:()=>r(!0)})})})})}export{J as default};
