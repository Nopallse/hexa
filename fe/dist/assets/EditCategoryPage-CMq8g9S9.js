import{a as k,Q as v,ar as E,r as i,j as e,Y as I,C as u,B as x,$ as m,a0 as w,d as B,T as d}from"./index-BNHkdQXN.js";import{c as f}from"./categoryApi-BM3YVwSW.js";import{C as K}from"./CategoryForm-DafBb0Cg.js";import{A as L}from"./Alert-CGwzUP-j.js";import{B as A}from"./Breadcrumbs-CE1cFXMC.js";import"./schemas-B-_fRkL-.js";import"./image-CL12PwSa.js";import"./CardContent-Xxy-Rqsq.js";import"./CloudUpload-salt8l8H.js";import"./Delete-C5OGYaUx.js";function Q(){const a=k(),{id:r}=v(),{showNotification:p}=E(),[s,y]=i.useState(null),[h,c]=i.useState(!0),[b,g]=i.useState(!1),[l,o]=i.useState(null),j=async()=>{if(!r){o("ID kategori tidak valid"),c(!1);return}try{c(!0),o(null);const t=await f.getCategoryById(r);if(t.success)y(t.data);else throw new Error("Failed to fetch category")}catch(t){o(t.message||"Gagal memuat data kategori")}finally{c(!1)}};i.useEffect(()=>{j()},[r]);const C=async t=>{if(r)try{g(!0),o(null);const n=await f.updateCategory(r,t);if(n.success)p({type:"success",message:"Kategori berhasil diperbarui"}),a("/admin/categories");else throw new Error(n.message||"Failed to update category")}catch(n){o(n.message||"Gagal memperbarui kategori")}finally{g(!1)}},S=()=>{a("/admin/categories")};return h?e.jsx(I,{message:"Memuat data kategori..."}):l&&!s?e.jsxs(u,{maxWidth:"lg",children:[e.jsx(L,{severity:"error",sx:{mt:3},children:l}),e.jsx(x,{sx:{mt:2,textAlign:"center"},children:e.jsx(m,{component:"button",onClick:()=>a("/admin/categories"),children:"Kembali ke Daftar Kategori"})})]}):e.jsxs(u,{maxWidth:"lg",children:[e.jsxs(A,{sx:{mb:3},children:[e.jsxs(m,{component:"button",variant:"body2",onClick:()=>a("/admin"),sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(w,{fontSize:"small"}),"Dashboard"]}),e.jsxs(m,{component:"button",variant:"body2",onClick:()=>a("/admin/categories"),sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(B,{fontSize:"small"}),"Kategori"]}),e.jsxs(d,{variant:"body2",color:"textPrimary",children:["Edit ",s?.name]})]}),e.jsxs(x,{sx:{mb:4},children:[e.jsx(d,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:"Edit Kategori"}),e.jsxs(d,{variant:"body1",color:"textSecondary",children:["Perbarui informasi kategori ",s?.name]})]}),s&&e.jsx(K,{mode:"edit",category:s,isLoading:b,error:l,onSubmit:C,onCancel:S})]})}export{Q as default};
