import{N as p,q as b,r as t,j as r,C as x,O as y,T as e,v as c,B as v,G as j,Q as C}from"./index-tvCmUXkA.js";import{C as u,a as h}from"./CardContent-BO7gwO4c.js";import{C as E}from"./CheckCircle-CLjEyLHK.js";import{E as W}from"./Error-DgXM3P66.js";import{A as S}from"./Alert-iJ2nvuQL.js";import"./useSlot-Dd61XFNI.js";function P(){const[n]=p(),i=b(),[f,o]=t.useState(!0),[g,k]=t.useState(!1),[d,s]=t.useState(null);return t.useEffect(()=>{(async()=>{const m=n.get("token");if(!m){s("Token verifikasi tidak ditemukan"),o(!1);return}try{o(!0),s(null);const a=await C.verifyEmail(m);a.success?k(!0):s(a.message||"Gagal memverifikasi email")}catch(a){console.error("Error verifying email:",a),s(a.response?.data?.error||a.message||"Terjadi kesalahan saat memverifikasi email")}finally{o(!1)}})()},[n]),f?r.jsx(x,{maxWidth:"sm",sx:{py:8},children:r.jsx(u,{sx:{borderRadius:2,boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:r.jsxs(h,{sx:{p:4,textAlign:"center"},children:[r.jsx(y,{sx:{mb:3}}),r.jsx(e,{variant:"h6",fontWeight:600,sx:{mb:1},children:"Memverifikasi Email..."}),r.jsx(e,{variant:"body2",color:"text.secondary",children:"Mohon tunggu sebentar"})]})})}):r.jsx(x,{maxWidth:"sm",sx:{py:8},children:r.jsx(u,{sx:{borderRadius:2,boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:r.jsx(h,{sx:{p:4,textAlign:"center"},children:g?r.jsxs(r.Fragment,{children:[r.jsx(E,{sx:{fontSize:64,color:"success.main",mb:3}}),r.jsx(e,{variant:"h5",fontWeight:600,sx:{mb:2,color:"text.primary"},children:"Email Berhasil Diverifikasi!"}),r.jsx(e,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"Email Anda telah berhasil diverifikasi. Anda sekarang dapat menggunakan semua fitur aplikasi."}),r.jsx(c,{variant:"contained",onClick:()=>i("/login"),fullWidth:!0,sx:{py:1.5,borderRadius:2,fontWeight:600,backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"}},children:"Masuk ke Akun"})]}):r.jsxs(r.Fragment,{children:[r.jsx(W,{sx:{fontSize:64,color:"error.main",mb:3}}),r.jsx(e,{variant:"h5",fontWeight:600,sx:{mb:2,color:"text.primary"},children:"Verifikasi Gagal"}),d&&r.jsx(S,{severity:"error",sx:{mb:3,borderRadius:2,textAlign:"left"},children:d}),r.jsx(e,{variant:"body2",color:"text.secondary",sx:{mb:4},children:"Token verifikasi tidak valid atau sudah kedaluwarsa. Silakan minta email verifikasi baru."}),r.jsxs(v,{sx:{display:"flex",gap:2,flexDirection:"column"},children:[r.jsx(c,{variant:"contained",onClick:()=>i("/login"),fullWidth:!0,sx:{py:1.5,borderRadius:2,fontWeight:600,backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"}},children:"Kembali ke Login"}),r.jsx(c,{variant:"outlined",startIcon:r.jsx(j,{}),onClick:()=>{const l=n.get("email");l?i("/login",{state:{resendVerification:l}}):i("/login")},fullWidth:!0,sx:{py:1.5,borderRadius:2,fontWeight:500},children:"Kirim Ulang Email Verifikasi"})]})]})})})})}export{P as default};
