import{q as S,a7 as E,aE as v,r as i,j as e,ab as w,C as u,B as x,ak as m,w as I,T as d,z as p}from"./index-NjOUpROL.js";import{C as B}from"./CategoryForm-C0-KxXvo.js";import{A as K}from"./Alert-B1gb4VHd.js";import{B as L}from"./Breadcrumbs-BwJwRWo-.js";import{H as A}from"./Home-DI4nhTWM.js";import"./schemas-CFjc3X59.js";import"./image-DX-k4_re.js";import"./CardContent-DjhJP1Qj.js";import"./Avatar-Biv38vKB.js";import"./useSlot-Cabyblz0.js";import"./CloudUpload-CRaoohSf.js";import"./Delete-Pt9chjFM.js";function U(){const a=S(),{id:r}=E(),{showNotification:f}=v(),[s,y]=i.useState(null),[h,c]=i.useState(!0),[b,g]=i.useState(!1),[l,o]=i.useState(null),j=async()=>{if(!r){o("ID kategori tidak valid"),c(!1);return}try{c(!0),o(null);const t=await p.getCategoryById(r);if(t.success)y(t.data);else throw new Error("Failed to fetch category")}catch(t){o(t.message||"Gagal memuat data kategori")}finally{c(!1)}};i.useEffect(()=>{j()},[r]);const C=async t=>{if(r)try{g(!0),o(null);const n=await p.updateCategory(r,t);if(n.success)f({type:"success",message:"Kategori berhasil diperbarui"}),a("/admin/categories");else throw new Error(n.message||"Failed to update category")}catch(n){o(n.message||"Gagal memperbarui kategori")}finally{g(!1)}},k=()=>{a("/admin/categories")};return h?e.jsx(w,{message:"Memuat data kategori..."}):l&&!s?e.jsxs(u,{maxWidth:"lg",children:[e.jsx(K,{severity:"error",sx:{mt:3},children:l}),e.jsx(x,{sx:{mt:2,textAlign:"center"},children:e.jsx(m,{component:"button",onClick:()=>a("/admin/categories"),children:"Kembali ke Daftar Kategori"})})]}):e.jsxs(u,{maxWidth:"lg",children:[e.jsxs(L,{sx:{mb:3},children:[e.jsxs(m,{component:"button",variant:"body2",onClick:()=>a("/admin"),sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(A,{fontSize:"small"}),"Dashboard"]}),e.jsxs(m,{component:"button",variant:"body2",onClick:()=>a("/admin/categories"),sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(I,{fontSize:"small"}),"Kategori"]}),e.jsxs(d,{variant:"body2",color:"textPrimary",children:["Edit ",s?.name]})]}),e.jsxs(x,{sx:{mb:4},children:[e.jsx(d,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:"Edit Kategori"}),e.jsxs(d,{variant:"body1",color:"textSecondary",children:["Perbarui informasi kategori ",s?.name]})]}),s&&e.jsx(B,{mode:"edit",category:s,isLoading:b,error:l,onSubmit:C,onCancel:k})]})}export{U as default};
