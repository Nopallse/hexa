import{r as x,k as B,l as F,m as V,_ as z,n as le,o as k,p as pe,q as xe,j as a,s as I,t as w,v as U,P as ue,w as me,c as ge,u as D,B as m,S as $,h as E,i as he,x as te,y as fe,b as N,A as be,f as ye,F as je,z as ve,E as Ce,M as H,T as v,d as Se,G as O,H as ke,J as q,K,N as J,D as Re,e as L,a as Ae,O as Pe,C as _e}from"./index-BNHkdQXN.js";import{p as Ie}from"./productApi-BVGz12-d.js";import{c as Me}from"./categoryApi-BM3YVwSW.js";import{g as Te}from"./image-CL12PwSa.js";import{C as Y,a as Q}from"./CardContent-Xxy-Rqsq.js";import{S as R}from"./Skeleton-C7Iai6me.js";import{C as We}from"./CardActionArea-CemEToui.js";import{A as we}from"./Alert-CGwzUP-j.js";import{S as $e}from"./ShoppingBag-DgwuEhNk.js";import{P as De}from"./Pagination-QF9ODMfb.js";import"./LastPage-DHkSoxah.js";const oe=x.createContext({});function Ge(e){return F("MuiAccordion",e)}const W=B("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),Le=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],Ee=e=>{const{classes:r,square:o,expanded:i,disabled:t,disableGutters:c}=e;return U({root:["root",!o&&"rounded",i&&"expanded",t&&"disabled",!c&&"gutters"],region:["region"]},Ge,r)},Ne=I(ue,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:o}=e;return[{[`& .${W.region}`]:r.region},r.root,!o.square&&r.rounded,!o.disableGutters&&r.gutters]}})(({theme:e})=>{const r={duration:e.transitions.duration.shortest};return{position:"relative",transition:e.transitions.create(["margin"],r),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(e.vars||e).palette.divider,transition:e.transitions.create(["opacity","background-color"],r)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${W.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${W.disabled}`]:{backgroundColor:(e.vars||e).palette.action.disabledBackground}}},({theme:e})=>({variants:[{props:r=>!r.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(e.vars||e).shape.borderRadius,borderBottomRightRadius:(e.vars||e).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:r=>!r.disableGutters,style:{[`&.${W.expanded}`]:{margin:"16px 0"}}}]})),X=x.forwardRef(function(r,o){const i=V({props:r,name:"MuiAccordion"}),{children:t,className:c,defaultExpanded:u=!1,disabled:p=!1,disableGutters:d=!1,expanded:y,onChange:l,square:h=!1,slots:j={},slotProps:C={},TransitionComponent:n,TransitionProps:f}=i,S=z(i,Le),[b,A]=le({controlled:y,default:u,name:"Accordion",state:"expanded"}),M=x.useCallback(de=>{A(!b),l&&l(de,!b)},[b,l,A]),[_,...G]=x.Children.toArray(t),s=x.useMemo(()=>({expanded:b,disabled:p,disableGutters:d,toggle:M}),[b,p,d,M]),g=k({},i,{square:h,disabled:p,disableGutters:d,expanded:b}),T=Ee(g),se=k({transition:n},j),ne=k({transition:f},C),[ie,ce]=pe("transition",{elementType:xe,externalForwardedProps:{slots:se,slotProps:ne},ownerState:g});return a.jsxs(Ne,k({className:w(T.root,c),ref:o,ownerState:g,square:h},S,{children:[a.jsx(oe.Provider,{value:s,children:_}),a.jsx(ie,k({in:b,timeout:"auto"},ce,{children:a.jsx("div",{"aria-labelledby":_.props.id,id:_.props["aria-controls"],role:"region",className:T.region,children:G})}))]}))});function Be(e){return F("MuiAccordionDetails",e)}B("MuiAccordionDetails",["root"]);const Fe=["className"],Ve=e=>{const{classes:r}=e;return U({root:["root"]},Be,r)},ze=I("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,r)=>r.root})(({theme:e})=>({padding:e.spacing(1,2,2)})),Z=x.forwardRef(function(r,o){const i=V({props:r,name:"MuiAccordionDetails"}),{className:t}=i,c=z(i,Fe),u=i,p=Ve(u);return a.jsx(ze,k({className:w(p.root,t),ref:o,ownerState:u},c))});function Ue(e){return F("MuiAccordionSummary",e)}const P=B("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),He=["children","className","expandIcon","focusVisibleClassName","onClick"],Oe=e=>{const{classes:r,expanded:o,disabled:i,disableGutters:t}=e;return U({root:["root",o&&"expanded",i&&"disabled",!t&&"gutters"],focusVisible:["focusVisible"],content:["content",o&&"expanded",!t&&"contentGutters"],expandIconWrapper:["expandIconWrapper",o&&"expanded"]},Ue,r)},qe=I(me,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,r)=>r.root})(({theme:e})=>{const r={duration:e.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],r),[`&.${P.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${P.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${P.disabled})`]:{cursor:"pointer"},variants:[{props:o=>!o.disableGutters,style:{[`&.${P.expanded}`]:{minHeight:64}}}]}}),Ke=I("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,r)=>r.content})(({theme:e})=>({display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:r=>!r.disableGutters,style:{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${P.expanded}`]:{margin:"20px 0"}}}]})),Je=I("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,r)=>r.expandIconWrapper})(({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${P.expanded}`]:{transform:"rotate(180deg)"}})),ee=x.forwardRef(function(r,o){const i=V({props:r,name:"MuiAccordionSummary"}),{children:t,className:c,expandIcon:u,focusVisibleClassName:p,onClick:d}=i,y=z(i,He),{disabled:l=!1,disableGutters:h,expanded:j,toggle:C}=x.useContext(oe),n=b=>{C&&C(b),d&&d(b)},f=k({},i,{expanded:j,disabled:l,disableGutters:h}),S=Oe(f);return a.jsxs(qe,k({focusRipple:!1,disableRipple:!0,disabled:l,component:"div","aria-expanded":j,className:w(S.root,c),focusVisibleClassName:w(S.focusVisible,p),onClick:n,ref:o,ownerState:f},y,{children:[a.jsx(Ke,{className:S.content,ownerState:f,children:t}),u&&a.jsx(Je,{className:S.expandIconWrapper,ownerState:f,children:u})]}))}),Ye=ge(a.jsx("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4"}),"AttachMoney");function Qe({filters:e,onFilterChange:r,loading:o=!1}){const i=D(),t=d=>{r({...e,search:d.target.value,page:1})},c=d=>{r({...e,sort:d.target.value,page:1})},u=()=>{r({...e,sort:"created_at",page:1})},p=()=>{r({...e,sort:"sold_count",page:1})};return a.jsx(m,{sx:{p:3,borderRadius:3,background:"linear-gradient(135deg, #ffffff 0%, #faf8ff 100%)",border:`1px solid ${i.palette.primary.light}20`,mb:4,boxShadow:"0 4px 20px rgba(0,0,0,0.08)"},children:a.jsxs($,{direction:{xs:"column",md:"row"},spacing:2,alignItems:"center",children:[a.jsx(E,{fullWidth:!0,placeholder:"Cari produk...",value:e.search||"",onChange:t,InputProps:{startAdornment:a.jsx(fe,{sx:{color:"text.secondary",mr:1}}),endAdornment:e.search&&a.jsx(he,{size:"small",onClick:()=>r({...e,search:void 0,page:1}),sx:{color:"text.secondary"},children:a.jsx(te,{fontSize:"small"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),a.jsxs($,{direction:"row",spacing:1,sx:{flexShrink:0},children:[a.jsx(N,{variant:e.sort==="created_at"?"contained":"outlined",startIcon:a.jsx(be,{}),onClick:u,disabled:o,sx:{borderRadius:2,textTransform:"none",fontWeight:600,px:2},children:"Terbaru"}),a.jsx(N,{variant:e.sort==="sold_count"?"contained":"outlined",startIcon:a.jsx(ye,{}),onClick:p,disabled:o,sx:{borderRadius:2,textTransform:"none",fontWeight:600,px:2},children:"Terlaris"}),a.jsxs(je,{sx:{minWidth:180},children:[a.jsx(ve,{children:"Harga"}),a.jsxs(Ce,{value:e.sort==="price"?"price":"",onChange:c,label:"Harga",disabled:o,sx:{borderRadius:2},children:[a.jsx(H,{value:"price",children:"Rendah ke Tinggi"}),a.jsx(H,{value:"price_desc",children:"Tinggi ke Rendah"})]})]})]})]})})}function Xe({filters:e,onFilterChange:r,categories:o,loading:i=!1}){const t=D(),[c,u]=x.useState(!0),[p,d]=x.useState(!0),y=n=>{r({...e,category:n||void 0,page:1})},l=n=>{const f=n.target.value?parseFloat(n.target.value):void 0;r({...e,min_price:f,page:1})},h=n=>{const f=n.target.value?parseFloat(n.target.value):void 0;r({...e,max_price:f,page:1})},j=()=>{r({page:1,limit:12})},C=e.category||e.min_price||e.max_price;return a.jsxs(m,{sx:{p:3,borderRadius:3,background:"linear-gradient(135deg, #ffffff 0%, #faf8ff 100%)",border:`1px solid ${t.palette.primary.light}20`,boxShadow:"0 4px 20px rgba(0,0,0,0.08)",position:"sticky",top:20},children:[a.jsxs(m,{sx:{mb:3},children:[a.jsx(v,{variant:"h6",fontWeight:700,sx:{color:t.palette.primary.main,fontFamily:'"Playfair Display", "Georgia", serif',letterSpacing:"-0.01em"},children:"Filter Produk"}),C&&a.jsx(N,{size:"small",startIcon:a.jsx(te,{}),onClick:j,sx:{mt:1,color:t.palette.error.main,fontSize:"0.875rem",textTransform:"none","&:hover":{backgroundColor:t.palette.error.light+"10"}},children:"Hapus Semua Filter"})]}),a.jsxs(X,{expanded:c,onChange:()=>u(!c),sx:{boxShadow:"none",border:`1px solid ${t.palette.primary.light}20`,borderRadius:2,mb:2,"&:before":{display:"none"}},children:[a.jsxs(ee,{expandIcon:a.jsx(O,{}),sx:{backgroundColor:t.palette.primary.light+"10",borderRadius:c?"8px 8px 0 0":"8px","& .MuiAccordionSummary-content":{alignItems:"center"}},children:[a.jsx(Se,{sx:{mr:1,color:t.palette.primary.main}}),a.jsx(v,{variant:"subtitle1",fontWeight:600,children:"Kategori"})]}),a.jsx(Z,{sx:{p:0},children:a.jsxs(ke,{dense:!0,children:[a.jsx(q,{disablePadding:!0,children:a.jsx(K,{selected:!e.category,onClick:()=>y(null),sx:{borderRadius:1,mx:1,mb:.5,"&.Mui-selected":{backgroundColor:t.palette.primary.light+"20","&:hover":{backgroundColor:t.palette.primary.light+"30"}}},children:a.jsx(J,{primary:"Semua Kategori",primaryTypographyProps:{fontWeight:e.category?400:600,color:e.category?"text.primary":t.palette.primary.main}})})}),o.map(n=>a.jsx(q,{disablePadding:!0,children:a.jsx(K,{selected:e.category===n.id,onClick:()=>y(n.id),sx:{borderRadius:1,mx:1,mb:.5,"&.Mui-selected":{backgroundColor:t.palette.primary.light+"20","&:hover":{backgroundColor:t.palette.primary.light+"30"}}},children:a.jsx(J,{primary:n.name,primaryTypographyProps:{fontWeight:e.category===n.id?600:400,color:e.category===n.id?t.palette.primary.main:"text.primary"}})})},n.id))]})})]}),a.jsxs(X,{expanded:p,onChange:()=>d(!p),sx:{boxShadow:"none",border:`1px solid ${t.palette.primary.light}20`,borderRadius:2,mb:2,"&:before":{display:"none"}},children:[a.jsxs(ee,{expandIcon:a.jsx(O,{}),sx:{backgroundColor:t.palette.primary.light+"10",borderRadius:p?"8px 8px 0 0":"8px","& .MuiAccordionSummary-content":{alignItems:"center"}},children:[a.jsx(Ye,{sx:{mr:1,color:t.palette.primary.main}}),a.jsx(v,{variant:"subtitle1",fontWeight:600,children:"Rentang Harga"})]}),a.jsx(Z,{children:a.jsxs($,{spacing:2,children:[a.jsx(E,{label:"Harga Minimum",type:"number",value:e.min_price||"",onChange:l,InputProps:{startAdornment:"Rp "},size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),a.jsx(E,{label:"Harga Maksimum",type:"number",value:e.max_price||"",onChange:h,InputProps:{startAdornment:"Rp "},size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})]})})]}),C&&a.jsxs(m,{children:[a.jsx(Re,{sx:{my:2}}),a.jsx(v,{variant:"subtitle2",fontWeight:600,sx:{mb:1},children:"Filter Aktif:"}),a.jsxs($,{direction:"row",spacing:1,flexWrap:"wrap",useFlexGap:!0,children:[e.category&&a.jsx(L,{label:`Kategori: ${o.find(n=>n.id===e.category)?.name}`,onDelete:()=>r({...e,category:void 0,page:1}),color:"primary",variant:"outlined",size:"small"}),e.min_price&&a.jsx(L,{label:`Min: Rp ${e.min_price.toLocaleString()}`,onDelete:()=>r({...e,min_price:void 0,page:1}),color:"info",variant:"outlined",size:"small"}),e.max_price&&a.jsx(L,{label:`Max: Rp ${e.max_price.toLocaleString()}`,onDelete:()=>r({...e,max_price:void 0,page:1}),color:"info",variant:"outlined",size:"small"})]})]})]})}const ae=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);function re({product:e,onView:r,loading:o=!1}){const i=D(),[t,c]=x.useState(!0),u=e.product_images?.find(l=>l.is_primary)||e.product_images?.[0],p=e.product_variants&&e.product_variants.length>0,d=p?{min:Math.min(...e.product_variants.map(l=>parseFloat(l.price))),max:Math.max(...e.product_variants.map(l=>parseFloat(l.price)))}:null;p?e.product_variants.reduce((l,h)=>l+h.stock,0):e.stock;const y=()=>{r(e)};return o?a.jsx(Y,{sx:{height:"100%",borderRadius:3},children:a.jsxs(Q,{sx:{p:0},children:[a.jsx(R,{variant:"rectangular",height:200}),a.jsxs(m,{sx:{p:3},children:[a.jsx(R,{variant:"text",height:24,sx:{mb:1}}),a.jsx(R,{variant:"text",height:20,sx:{mb:2}}),a.jsx(R,{variant:"text",height:32,sx:{mb:2}}),a.jsx(R,{variant:"rectangular",height:36})]})]})}):a.jsx(Y,{sx:{height:"100%",borderRadius:1.5,overflow:"hidden",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",background:"#ffffff",border:`1px solid ${i.palette.grey[200]}`,boxShadow:"0 2px 8px rgba(0,0,0,0.08)","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 24px rgba(0,0,0,0.12)"}},onClick:y,children:a.jsxs(We,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[a.jsxs(m,{sx:{position:"relative",height:200,overflow:"hidden",background:`linear-gradient(135deg, ${i.palette.primary.light}10, ${i.palette.secondary.light}10)`},children:[t&&a.jsx(R,{variant:"rectangular",width:"100%",height:"100%"}),u?a.jsx("img",{src:Te(u.image_name),alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover",display:t?"none":"block"},onLoad:()=>c(!1),onError:()=>c(!1)}):a.jsx("img",{src:`https://placehold.co/400x200/9682DB/FFFFFF/png?text=${encodeURIComponent(e.name)}`,alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover",display:t?"none":"block"},onLoad:()=>c(!1),onError:()=>c(!1)})]}),a.jsxs(Q,{sx:{p:3,textAlign:"center",display:"flex",flexDirection:"column"},children:[a.jsx(v,{variant:"h6",fontWeight:600,sx:{mb:0,textAlign:"start",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",fontFamily:'"Playfair Display", "Georgia", serif',letterSpacing:"-0.01em",lineHeight:1.3},children:e.name}),a.jsxs(m,{sx:{mt:"auto",display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[a.jsx(v,{variant:"h6",fontWeight:700,color:"primary.main",sx:{fontFamily:'"Playfair Display", "Georgia", serif',mb:0},children:ae(p?d.min:parseFloat(e.price||"0"))}),a.jsx(v,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem",fontWeight:500,ml:1},children:"100 Terjual"})]})]})]})})}function la(){const e=D(),r=Ae(),[o,i]=Pe(),[t,c]=x.useState([]),[u,p]=x.useState([]),[d,y]=x.useState(!0),[l,h]=x.useState(null),[j,C]=x.useState({page:1,limit:12,total:0,pages:0}),[n,f]=x.useState({page:1,limit:12,search:o.get("search")||void 0,category:o.get("category")||void 0,min_price:o.get("min_price")?parseFloat(o.get("min_price")):void 0,max_price:o.get("max_price")?parseFloat(o.get("max_price")):void 0,sort:o.get("sort")||"created_at"}),S=async()=>{try{y(!0),h(null);const s=await Ie.getProducts(n);s.success?(c(s.data),C(s.pagination)):h("Gagal memuat produk")}catch(s){console.error("Error fetching products:",s),h("Gagal memuat produk")}finally{y(!1)}},b=async()=>{try{const s=await Me.getCategories({limit:100});p(s.data)}catch(s){console.error("Error fetching categories:",s)}},A=s=>{f(s);const g=new URLSearchParams;s.search&&g.set("search",s.search),s.category&&g.set("category",s.category),s.min_price&&g.set("min_price",s.min_price.toString()),s.max_price&&g.set("max_price",s.max_price.toString()),s.sort&&g.set("sort",s.sort),s.page&&s.page>1&&g.set("page",s.page.toString()),i(g)},M=(s,g)=>{const T={...n,page:g};A(T)},_=s=>{r(`/products/${s.id}`)};x.useEffect(()=>{S()},[n]),x.useEffect(()=>{b()},[]);const G=()=>a.jsx(m,{sx:{display:"grid",gridTemplateColumns:{xs:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)",xl:"repeat(5, 1fr)"},gap:3},children:[...Array(12)].map((s,g)=>a.jsx(re,{product:{},onView:()=>{},loading:!0},g))});return a.jsx(m,{sx:{minHeight:"100vh",py:4},children:a.jsxs(_e,{maxWidth:"xl",children:[a.jsxs(m,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:4,alignItems:"flex-start"},children:[a.jsx(m,{sx:{width:{xs:"100%",md:"300px"},flexShrink:0,order:{xs:1,md:1}},children:a.jsx(Xe,{filters:n,onFilterChange:A,categories:u,loading:d})}),a.jsxs(m,{sx:{flex:1,minWidth:0,order:{xs:2,md:2}},children:[a.jsx(Qe,{filters:n,onFilterChange:A,loading:d}),a.jsx(m,{sx:{mb:4},children:a.jsx(v,{variant:"h6",color:"text.primary",fontWeight:600,children:d?a.jsx(R,{width:200}):`Menampilkan ${t.length} dari ${j.total} produk`})}),d?G():l?a.jsx(we,{severity:"error",sx:{maxWidth:600,mx:"auto"},children:l}):t.length===0?a.jsxs(m,{sx:{textAlign:"center",py:8,px:4,borderRadius:3,background:"linear-gradient(135deg, #faf8ff 0%, #f0f4ff 100%)",border:`1px solid ${e.palette.primary.light}20`},children:[a.jsx($e,{sx:{fontSize:64,color:"text.secondary",mb:2}}),a.jsx(v,{variant:"h6",color:"text.secondary",fontWeight:600,sx:{mb:1},children:"Tidak ada produk ditemukan"}),a.jsx(v,{variant:"body2",color:"text.secondary",children:"Coba ubah filter pencarian atau lihat kategori lainnya"})]}):a.jsx(m,{sx:{display:"grid",gridTemplateColumns:{xs:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)",xl:"repeat(5, 1fr)"},gap:3},children:t.map(s=>a.jsx(re,{product:s,onView:_},s.id))})]})]}),!d&&!l&&t.length>0&&j.pages>1&&a.jsx(m,{sx:{display:"flex",justifyContent:"center",mt:6},children:a.jsx(De,{count:j.pages,page:j.page,onChange:M,color:"primary",size:"large",sx:{"& .MuiPaginationItem-root":{borderRadius:2,fontWeight:600}}})})]})})}export{la as default};
