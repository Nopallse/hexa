import{p as b,r as c,j as r,B as j,S as p,D as n,t as h}from"./index-Idy1NCQZ.js";import{a as f}from"./addressApi-CFRSAVlm.js";import{A as C}from"./Alert-Cw7awSGM.js";import{F as S}from"./FormControlLabel-BVsvLRvY.js";import{S as A}from"./Switch-KooZQEt_.js";function F({address:i,onSuccess:x,onCancel:y}){const _=b(),[d,u]=c.useState(!1),[m,l]=c.useState(null),[e,g]=c.useState({address_line:i?.address_line||"",city:i?.city||"",province:i?.province||"",postal_code:i?.postal_code||"",is_primary:i?.is_primary||!1}),s=(a,t)=>{g(o=>({...o,[a]:t}))},v=async a=>{if(a.preventDefault(),!e.address_line.trim()||!e.city.trim()||!e.province.trim()||!e.postal_code.trim()){l("Semua field harus diisi");return}try{u(!0),l(null);let t;if(i){const o={address_line:e.address_line,city:e.city,province:e.province,postal_code:e.postal_code,is_primary:e.is_primary};t=await f.updateAddress(i.id,o)}else{const o={address_line:e.address_line,city:e.city,province:e.province,postal_code:e.postal_code,is_primary:e.is_primary};t=await f.addAddress(o)}t.success&&x(t.data)}catch(t){console.error("Error saving address:",t),l(t.response?.data?.error||"Gagal menyimpan alamat")}finally{u(!1)}};return r.jsxs(j,{component:"form",onSubmit:v,sx:{p:3,border:`1px solid ${_.palette.grey[300]}`,borderRadius:2,backgroundColor:"#f8f9fa"},children:[m&&r.jsx(C,{severity:"error",sx:{mb:3},onClose:()=>l(null),children:m}),r.jsxs(p,{spacing:3,children:[r.jsx(n,{label:"Alamat Lengkap",value:e.address_line,onChange:a=>s("address_line",a.target.value),fullWidth:!0,required:!0,multiline:!0,rows:3,placeholder:"Jl. Contoh No. 123, RT 01/RW 02"}),r.jsxs(p,{direction:{xs:"column",sm:"row"},spacing:2,children:[r.jsx(n,{label:"Kota",value:e.city,onChange:a=>s("city",a.target.value),fullWidth:!0,required:!0,placeholder:"Jakarta Pusat"}),r.jsx(n,{label:"Provinsi",value:e.province,onChange:a=>s("province",a.target.value),fullWidth:!0,required:!0,placeholder:"DKI Jakarta"})]}),r.jsx(n,{label:"Kode Pos",value:e.postal_code,onChange:a=>s("postal_code",a.target.value),fullWidth:!0,required:!0,placeholder:"10270"}),r.jsx(S,{control:r.jsx(A,{checked:e.is_primary,onChange:a=>s("is_primary",a.target.checked),color:"primary"}),label:"Set sebagai alamat utama"}),r.jsxs(p,{direction:"row",spacing:2,sx:{pt:2},children:[r.jsx(h,{type:"submit",variant:"contained",disabled:d,sx:{flex:1,py:1.5,borderRadius:2,fontWeight:600},children:d?"Menyimpan...":i?"Update Alamat":"Tambah Alamat"}),r.jsx(h,{variant:"outlined",onClick:y,disabled:d,sx:{flex:1,py:1.5,borderRadius:2,fontWeight:600},children:"Batal"})]})]})]})}export{F as A};
