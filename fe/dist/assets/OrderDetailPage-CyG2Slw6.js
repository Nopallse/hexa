import{r as c,a as E,g as F,u as H,_ as G,i as u,j as e,s as W,k as B,m as K,c as te,b4 as be,l as xe,p as ge,a8 as ve,q as fe,aB as ye,ag as je,C as ne,t as q,B as S,an as ie,T as o,x as U,S as j,w as oe,O as X,aq as Se,H as ke,I as se,aA as Ce,M as Le,E as we}from"./index-CLjvjqZT.js";import{a as le}from"./orderApi-BQi_9tph.js";import{o as Ie}from"./orderApi-Cxa2AtbH.js";import{u as Re}from"./useCurrencyConversion-DcYLh6Vv.js";import{A as O}from"./Alert-Cs6zeJMp.js";import{A as ce}from"./ArrowBack-DbsPIT4g.js";import{B as _e}from"./Breadcrumbs-CIb5IDov.js";import{H as We}from"./Home-BS3p-bFf.js";import{O as ze}from"./Receipt-DjzIlEy0.js";import{G as k}from"./Grid-Yhwe_G7n.js";import{C as V,a as Q}from"./CardContent-Dqpv-NXF.js";import{T as de}from"./Tooltip-BrgySCds.js";import{O as Ne}from"./OpenInNew-Cpr4aqWA.js";import{R as Pe}from"./Refresh-DQUm0Bly.js";import{C as Me}from"./CheckCircle-Dgb9bYPy.js";import{A as $e}from"./Avatar-B6RLlSql.js";import"./useSlot-CDkgSjON.js";import"./Popper-Bu6D8dQx.js";const Y=c.createContext({}),re=c.createContext({});function De(t){return E("MuiStep",t)}F("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const Te=["active","children","className","component","completed","disabled","expanded","index","last"],Ue=t=>{const{classes:a,orientation:i,alternativeLabel:s,completed:l}=t;return K({root:["root",i,s&&"alternativeLabel",l&&"completed"]},De,a)},Be=W("div",{name:"MuiStep",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:i}=t;return[a.root,a[i.orientation],i.alternativeLabel&&a.alternativeLabel,i.completed&&a.completed]}})(({ownerState:t})=>u({},t.orientation==="horizontal"&&{paddingLeft:8,paddingRight:8},t.alternativeLabel&&{flex:1,position:"relative"})),Ae=c.forwardRef(function(a,i){const s=H({props:a,name:"MuiStep"}),{active:l,children:d,className:h,component:p="div",completed:b,disabled:g,expanded:x=!1,index:r,last:f}=s,w=G(s,Te),{activeStep:R,connector:v,alternativeLabel:z,orientation:N,nonLinear:C}=c.useContext(Y);let[y=!1,M=!1,L=!1]=[l,b,g];R===r?y=l!==void 0?l:!0:!C&&R>r?M=b!==void 0?b:!0:!C&&R<r&&(L=g!==void 0?g:!0);const $=c.useMemo(()=>({index:r,last:f,expanded:x,icon:r+1,active:y,completed:M,disabled:L}),[r,f,x,y,M,L]),I=u({},s,{active:y,orientation:N,alternativeLabel:z,completed:M,disabled:L,expanded:x,component:p}),D=Ue(I),P=e.jsxs(Be,u({as:p,className:B(D.root,h),ref:i,ownerState:I},w,{children:[v&&z&&r!==0?v:null,d]}));return e.jsx(re.Provider,{value:$,children:v&&!z&&r!==0?e.jsxs(c.Fragment,{children:[v,P]}):P})}),Oe=te(e.jsx("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),Ee=te(e.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");function Fe(t){return E("MuiStepIcon",t)}const Z=F("MuiStepIcon",["root","active","completed","error","text"]);var pe;const He=["active","className","completed","error","icon"],Ge=t=>{const{classes:a,active:i,completed:s,error:l}=t;return K({root:["root",i&&"active",s&&"completed",l&&"error"],text:["text"]},Fe,a)},ee=W(be,{name:"MuiStepIcon",slot:"Root",overridesResolver:(t,a)=>a.root})(({theme:t})=>({display:"block",transition:t.transitions.create("color",{duration:t.transitions.duration.shortest}),color:(t.vars||t).palette.text.disabled,[`&.${Z.completed}`]:{color:(t.vars||t).palette.primary.main},[`&.${Z.active}`]:{color:(t.vars||t).palette.primary.main},[`&.${Z.error}`]:{color:(t.vars||t).palette.error.main}})),Ke=W("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(t,a)=>a.text})(({theme:t})=>({fill:(t.vars||t).palette.primary.contrastText,fontSize:t.typography.caption.fontSize,fontFamily:t.typography.fontFamily})),qe=c.forwardRef(function(a,i){const s=H({props:a,name:"MuiStepIcon"}),{active:l=!1,className:d,completed:h=!1,error:p=!1,icon:b}=s,g=G(s,He),x=u({},s,{active:l,completed:h,error:p}),r=Ge(x);if(typeof b=="number"||typeof b=="string"){const f=B(d,r.root);return p?e.jsx(ee,u({as:Ee,className:f,ref:i,ownerState:x},g)):h?e.jsx(ee,u({as:Oe,className:f,ref:i,ownerState:x},g)):e.jsxs(ee,u({className:f,ref:i,ownerState:x},g,{children:[pe||(pe=e.jsx("circle",{cx:"12",cy:"12",r:"12"})),e.jsx(Ke,{className:r.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:x,children:b})]}))}return b});function Ve(t){return E("MuiStepLabel",t)}const T=F("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),Qe=["children","className","componentsProps","error","icon","optional","slotProps","StepIconComponent","StepIconProps"],Ye=t=>{const{classes:a,orientation:i,active:s,completed:l,error:d,disabled:h,alternativeLabel:p}=t;return K({root:["root",i,d&&"error",h&&"disabled",p&&"alternativeLabel"],label:["label",s&&"active",l&&"completed",d&&"error",h&&"disabled",p&&"alternativeLabel"],iconContainer:["iconContainer",s&&"active",l&&"completed",d&&"error",h&&"disabled",p&&"alternativeLabel"],labelContainer:["labelContainer",p&&"alternativeLabel"]},Ve,a)},Je=W("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:i}=t;return[a.root,a[i.orientation]]}})(({ownerState:t})=>u({display:"flex",alignItems:"center",[`&.${T.alternativeLabel}`]:{flexDirection:"column"},[`&.${T.disabled}`]:{cursor:"default"}},t.orientation==="vertical"&&{textAlign:"left",padding:"8px 0"})),Xe=W("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(t,a)=>a.label})(({theme:t})=>u({},t.typography.body2,{display:"block",transition:t.transitions.create("color",{duration:t.transitions.duration.shortest}),[`&.${T.active}`]:{color:(t.vars||t).palette.text.primary,fontWeight:500},[`&.${T.completed}`]:{color:(t.vars||t).palette.text.primary,fontWeight:500},[`&.${T.alternativeLabel}`]:{marginTop:16},[`&.${T.error}`]:{color:(t.vars||t).palette.error.main}})),Ze=W("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(t,a)=>a.iconContainer})(()=>({flexShrink:0,display:"flex",paddingRight:8,[`&.${T.alternativeLabel}`]:{paddingRight:0}})),et=W("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(t,a)=>a.labelContainer})(({theme:t})=>({width:"100%",color:(t.vars||t).palette.text.secondary,[`&.${T.alternativeLabel}`]:{textAlign:"center"}})),me=c.forwardRef(function(a,i){var s;const l=H({props:a,name:"MuiStepLabel"}),{children:d,className:h,componentsProps:p={},error:b=!1,icon:g,optional:x,slotProps:r={},StepIconComponent:f,StepIconProps:w}=l,R=G(l,Qe),{alternativeLabel:v,orientation:z}=c.useContext(Y),{active:N,disabled:C,completed:y,icon:M}=c.useContext(re),L=g||M;let $=f;L&&!$&&($=qe);const I=u({},l,{active:N,alternativeLabel:v,completed:y,disabled:C,error:b,orientation:z}),D=Ye(I),P=(s=r.label)!=null?s:p.label;return e.jsxs(Je,u({className:B(D.root,h),ref:i,ownerState:I},R,{children:[L||$?e.jsx(Ze,{className:D.iconContainer,ownerState:I,children:e.jsx($,u({completed:y,active:N,error:b,icon:L},w))}):null,e.jsxs(et,{className:D.labelContainer,ownerState:I,children:[d?e.jsx(Xe,u({ownerState:I},P,{className:B(D.label,P?.className),children:d})):null,x]})]}))});me.muiName="StepLabel";function tt(t){return E("MuiStepConnector",t)}F("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const rt=["className"],at=t=>{const{classes:a,orientation:i,alternativeLabel:s,active:l,completed:d,disabled:h}=t,p={root:["root",i,s&&"alternativeLabel",l&&"active",d&&"completed",h&&"disabled"],line:["line",`line${xe(i)}`]};return K(p,tt,a)},nt=W("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:i}=t;return[a.root,a[i.orientation],i.alternativeLabel&&a.alternativeLabel,i.completed&&a.completed]}})(({ownerState:t})=>u({flex:"1 1 auto"},t.orientation==="vertical"&&{marginLeft:12},t.alternativeLabel&&{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"})),it=W("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(t,a)=>{const{ownerState:i}=t;return[a.line,a[`line${xe(i.orientation)}`]]}})(({ownerState:t,theme:a})=>{const i=a.palette.mode==="light"?a.palette.grey[400]:a.palette.grey[600];return u({display:"block",borderColor:a.vars?a.vars.palette.StepConnector.border:i},t.orientation==="horizontal"&&{borderTopStyle:"solid",borderTopWidth:1},t.orientation==="vertical"&&{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24})}),ot=c.forwardRef(function(a,i){const s=H({props:a,name:"MuiStepConnector"}),{className:l}=s,d=G(s,rt),{alternativeLabel:h,orientation:p="horizontal"}=c.useContext(Y),{active:b,disabled:g,completed:x}=c.useContext(re),r=u({},s,{alternativeLabel:h,orientation:p,active:b,completed:x,disabled:g}),f=at(r);return e.jsx(nt,u({className:B(f.root,l),ref:i,ownerState:r},d,{children:e.jsx(it,{className:f.line,ownerState:r})}))});function st(t){return E("MuiStepper",t)}F("MuiStepper",["root","horizontal","vertical","nonLinear","alternativeLabel"]);const lt=["activeStep","alternativeLabel","children","className","component","connector","nonLinear","orientation"],ct=t=>{const{orientation:a,nonLinear:i,alternativeLabel:s,classes:l}=t;return K({root:["root",a,i&&"nonLinear",s&&"alternativeLabel"]},st,l)},dt=W("div",{name:"MuiStepper",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:i}=t;return[a.root,a[i.orientation],i.alternativeLabel&&a.alternativeLabel,i.nonLinear&&a.nonLinear]}})(({ownerState:t})=>u({display:"flex"},t.orientation==="horizontal"&&{flexDirection:"row",alignItems:"center"},t.orientation==="vertical"&&{flexDirection:"column"},t.alternativeLabel&&{alignItems:"flex-start"})),pt=e.jsx(ot,{}),xt=c.forwardRef(function(a,i){const s=H({props:a,name:"MuiStepper"}),{activeStep:l=0,alternativeLabel:d=!1,children:h,className:p,component:b="div",connector:g=pt,nonLinear:x=!1,orientation:r="horizontal"}=s,f=G(s,lt),w=u({},s,{nonLinear:x,alternativeLabel:d,orientation:r,component:b}),R=ct(w),v=c.Children.toArray(h).filter(Boolean),z=v.map((C,y)=>c.cloneElement(C,u({index:y,last:y+1===v.length},C.props))),N=c.useMemo(()=>({activeStep:l,alternativeLabel:d,connector:g,nonLinear:x,orientation:r}),[l,d,g,x,r]);return e.jsx(Y.Provider,{value:N,children:e.jsx(dt,u({as:b,ownerState:w,className:B(R.root,p),ref:i},f,{children:z}))})}),mt=te(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"RadioButtonUnchecked");function Nt(){const t=ge(),{id:a}=ve(),i=fe(),{formatPrice:s}=Re(),{showNotification:l}=ye(),[d,h]=c.useState(!0),[p,b]=c.useState(!1),[g,x]=c.useState(null),[r,f]=c.useState(null),[w,R]=c.useState(!1),[v,z]=c.useState(null),[N,C]=c.useState(null),[y,M]=c.useState(!1),L=n=>new Date(n).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),$=n=>{switch(n){case"belum_bayar":return"warning";case"dikemas":return"primary";case"dikirim":return"info";case"diterima":return"success";case"dibatalkan":return"error";default:return"default"}},I=n=>{switch(n){case"belum_bayar":return"Belum Bayar";case"dikemas":return"Dikemas";case"dikirim":return"Dikirim";case"diterima":return"Diterima";case"dibatalkan":return"Dibatalkan";default:return n}},D=c.useCallback(async()=>{if(r?.shipping?.tracking_number){R(!0),C(null);try{const n=await Ie.trackShipment(r.shipping.tracking_number,r.shipping.courier?.toLowerCase());n.success?z(n):C(n.error||"Gagal mendapatkan informasi tracking")}catch(n){C(n.response?.data?.error||"Gagal mendapatkan informasi tracking")}finally{R(!1)}}},[r?.shipping?.tracking_number,r?.shipping?.courier]),P=(n,m)=>{const _=n.toLowerCase();return{jne:"https://www.jne.co.id/id/tracking/tariff-and-service",jnt:"https://www.jet.co.id/track",sicepat:"https://www.sicepat.com/check-resi",pos:"https://www.posindonesia.co.id/tracking",anteraja:"https://anteraja.id/tracking",ninja:"https://www.ninjaxpress.co.id/tracking",lion:"https://lionparcel.com/tracking",ide:"https://idexpress.com/tracking"}[_]||null},ae=async()=>{if(!a){x("ID pesanan tidak valid"),h(!1);return}try{h(!0),x(null);const n=await le.getOrderById(a);if(n.success){const m=n.data;f(m)}else throw new Error("Failed to fetch order")}catch(n){x(n.response?.data?.error||n.message||"Gagal memuat data pesanan")}finally{h(!1)}};c.useEffect(()=>{ae()},[a]);const ue=(n,m)=>({belum_bayar:m==="paid"?["dikemas","dibatalkan"]:["dibatalkan"],dikemas:["dikirim","dibatalkan"],dikirim:[],diterima:[],dibatalkan:[]})[n]||[],he=async n=>{if(!(!r||n===r.status))try{b(!0);const m=await le.updateOrderStatus(r.id,n);if(m.success)l({type:"success",message:"Status pesanan berhasil diperbarui"}),ae();else throw new Error(m.error||"Failed to update order status")}catch(m){l({type:"error",message:m.response?.data?.error||m.message||"Gagal memperbarui status pesanan"})}finally{b(!1)}};return d?e.jsx(je,{message:"Memuat data pesanan..."}):g||!r?e.jsxs(ne,{maxWidth:"xl",sx:{py:4},children:[e.jsx(O,{severity:"error",children:g||"Pesanan tidak ditemukan"}),e.jsx(q,{startIcon:e.jsx(ce,{}),onClick:()=>i("/admin/orders"),sx:{mt:2},children:"Kembali ke Daftar Pesanan"})]}):e.jsx(S,{sx:{bgcolor:"grey.50",minHeight:"100vh",pb:4},children:e.jsxs(ne,{maxWidth:"xl",sx:{py:4},children:[e.jsxs(_e,{sx:{mb:2},children:[e.jsxs(ie,{component:"button",variant:"body2",onClick:()=>i("/admin"),sx:{display:"flex",alignItems:"center",textDecoration:"none",color:"text.secondary","&:hover":{color:"primary.main"}},children:[e.jsx(We,{sx:{mr:.5,fontSize:"1rem"}}),"Dashboard"]}),e.jsxs(ie,{component:"button",variant:"body2",onClick:()=>i("/admin/orders"),sx:{display:"flex",alignItems:"center",textDecoration:"none",color:"text.secondary","&:hover":{color:"primary.main"}},children:[e.jsx(ze,{sx:{mr:.5,fontSize:"1rem"}}),"Pesanan"]}),e.jsxs(o,{variant:"body2",color:"text.primary",fontWeight:500,children:["#",r.id.slice(-8).toUpperCase()]})]}),e.jsx(q,{startIcon:e.jsx(ce,{}),onClick:()=>i("/admin/orders"),sx:{mb:3,borderRadius:2,fontWeight:500,color:"text.secondary","&:hover":{color:"primary.main",backgroundColor:"action.hover"}},children:"Kembali ke Daftar Pesanan"}),e.jsx(U,{elevation:0,sx:{mb:3,borderRadius:3,overflow:"hidden",background:`linear-gradient(135deg, ${t.palette.primary.main}15 0%, ${t.palette.primary.light}08 100%)`,border:`1px solid ${t.palette.divider}`},children:e.jsx(S,{sx:{p:4,pb:3},children:e.jsxs(j,{direction:{xs:"column",md:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",md:"center"},spacing:3,children:[e.jsxs(S,{sx:{flex:1},children:[e.jsxs(j,{direction:"row",alignItems:"center",spacing:2,sx:{mb:1.5},children:[e.jsxs(o,{variant:"h4",fontWeight:700,sx:{color:"text.primary"},children:["Order #",r.id.slice(-8).toUpperCase()]}),e.jsx(oe,{label:I(r.status),color:$(r.status),size:"small",sx:{height:28,fontWeight:600,fontSize:"0.75rem",textTransform:"uppercase",letterSpacing:.5}})]}),e.jsxs(o,{variant:"body2",color:"text.secondary",children:["Dibuat pada ",L(r.created_at)]})]}),e.jsx(S,{sx:{minWidth:{xs:"100%",md:280}},children:(()=>{const n=ue(r.status,r.payment_status);if(n.length===0)return null;const m=r.status==="belum_bayar"&&r.payment_status!=="paid";return e.jsxs(j,{spacing:1.5,children:[m&&e.jsx(O,{severity:"warning",sx:{borderRadius:2,fontSize:"0.875rem"},children:"Pesanan belum dibayar"}),n.map(_=>{const A=_==="dikirim",J=_==="dibatalkan";return e.jsx(q,{variant:J?"outlined":"contained",color:J?"error":"primary",fullWidth:!0,startIcon:p?e.jsx(X,{size:16}):null,onClick:()=>he(_),disabled:p,sx:{borderRadius:2,fontWeight:600,py:1.5,textTransform:"none",borderWidth:J?2:1},children:p?"Memproses...":e.jsxs(e.Fragment,{children:[A?"Kirim Pesanan":I(_),A&&e.jsx(o,{variant:"caption",sx:{ml:1,opacity:.9},children:"(Buat Waybill)"})]})},_)})]})})()})]})})}),e.jsxs(k,{container:!0,spacing:3,children:[e.jsx(k,{item:!0,xs:12,lg:8,children:e.jsxs(j,{spacing:3,children:[e.jsx(V,{elevation:0,sx:{borderRadius:3,border:`1px solid ${t.palette.divider}`},children:e.jsxs(Q,{sx:{p:3},children:[e.jsxs(j,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:3},children:[e.jsx(Se,{color:"primary"}),e.jsx(o,{variant:"h6",fontWeight:700,children:"Informasi Pelanggan"})]}),r.user&&e.jsxs(k,{container:!0,spacing:2,children:[e.jsxs(k,{item:!0,xs:12,sm:6,children:[e.jsx(o,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem",mb:.5,display:"block"},children:"Nama"}),e.jsx(o,{variant:"body1",fontWeight:600,children:r.user.full_name})]}),e.jsxs(k,{item:!0,xs:12,sm:6,children:[e.jsx(o,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem",mb:.5,display:"block"},children:"Email"}),e.jsx(o,{variant:"body1",children:r.user.email})]}),r.user.phone&&e.jsxs(k,{item:!0,xs:12,sm:6,children:[e.jsx(o,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem",mb:.5,display:"block"},children:"Telepon"}),e.jsx(o,{variant:"body1",children:r.user.phone})]})]})]})}),r.shipping&&e.jsx(V,{elevation:0,sx:{borderRadius:3,border:`1px solid ${t.palette.divider}`},children:e.jsxs(Q,{sx:{p:3},children:[e.jsxs(j,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{mb:3},children:[e.jsxs(j,{direction:"row",alignItems:"center",spacing:1.5,children:[e.jsx(ke,{color:"primary"}),e.jsx(o,{variant:"h6",fontWeight:700,children:"Informasi Pengiriman"})]}),r.shipping.tracking_number&&e.jsxs(j,{direction:"row",spacing:1,children:[r.shipping.courier&&P(r.shipping.courier,r.shipping.tracking_number)&&e.jsx(de,{title:"Buka di website kurir",children:e.jsx(se,{size:"small",onClick:()=>{const n=P(r.shipping.courier,r.shipping.tracking_number);n&&window.open(n,"_blank")},sx:{color:"primary.main"},children:e.jsx(Ne,{fontSize:"small"})})}),e.jsx(de,{title:"Refresh tracking",children:e.jsx(se,{size:"small",onClick:D,disabled:w,sx:{color:"primary.main"},children:w?e.jsx(X,{size:20}):e.jsx(Pe,{fontSize:"small"})})})]})]}),e.jsxs(k,{container:!0,spacing:2,children:[e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsxs(U,{elevation:0,sx:{p:2,bgcolor:"grey.50",borderRadius:2},children:[e.jsx(o,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem",mb:.5,display:"block"},children:"Kurir"}),e.jsx(o,{variant:"body1",fontWeight:600,children:r.shipping.courier})]})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsxs(U,{elevation:0,sx:{p:2,bgcolor:"grey.50",borderRadius:2},children:[e.jsx(o,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem",mb:.5,display:"block"},children:"Status Pengiriman"}),e.jsx(o,{variant:"body1",fontWeight:600,children:r.shipping.shipping_status})]})}),r.shipping.tracking_number&&e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsxs(U,{elevation:0,sx:{p:2,bgcolor:"primary.light",borderRadius:2},children:[e.jsx(o,{variant:"caption",color:"primary.dark",sx:{fontSize:"0.75rem",mb:.5,display:"block",fontWeight:600},children:"Nomor Resi"}),e.jsx(o,{variant:"body1",fontWeight:700,color:"primary.main",children:r.shipping.tracking_number})]})}),r.shipping.estimated_delivery&&e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsxs(U,{elevation:0,sx:{p:2,bgcolor:"grey.50",borderRadius:2},children:[e.jsx(o,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem",mb:.5,display:"block"},children:"Estimasi Sampai"}),e.jsx(o,{variant:"body1",fontWeight:600,children:L(r.shipping.estimated_delivery)})]})}),r.shipping.tracking_number&&e.jsx(k,{item:!0,xs:12,children:e.jsxs(q,{variant:"outlined",onClick:()=>M(!y),sx:{textTransform:"none",borderRadius:2,mt:1},fullWidth:!0,children:[y?"Sembunyikan":"Lihat"," Detail Tracking"]})})]}),y&&e.jsxs(S,{sx:{mt:4,pt:3,borderTop:`1px solid ${t.palette.divider}`},children:[N&&e.jsx(O,{severity:"warning",sx:{mb:3,borderRadius:2},onClose:()=>C(null),children:N}),w&&!v&&e.jsx(S,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(X,{})}),v?.data?.history&&Array.isArray(v.data.history)&&v.data.history.length>0?e.jsxs(S,{children:[e.jsx(o,{variant:"subtitle1",fontWeight:700,sx:{mb:3},children:"Riwayat Tracking"}),e.jsx(xt,{orientation:"vertical",sx:{"& .MuiStepLabel-root":{alignItems:"flex-start"}},children:v.data.history.map((n,m)=>e.jsx(Ae,{active:m===0,completed:m>0,children:e.jsxs(me,{StepIconComponent:()=>e.jsx(S,{sx:{width:24,height:24,borderRadius:"50%",bgcolor:m===0?"primary.main":"grey.300",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:m===0?e.jsx(Me,{sx:{fontSize:20}}):e.jsx(mt,{sx:{fontSize:20}})}),children:[e.jsx(o,{variant:"body2",fontWeight:600,sx:{mb:.5},children:n.status?n.status.charAt(0).toUpperCase()+n.status.slice(1):"Update"}),n.note&&e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:1},children:n.note}),n.updated_at&&e.jsx(o,{variant:"caption",color:"text.secondary",children:L(n.updated_at)})]})},m))})]}):v&&e.jsx(O,{severity:"info",sx:{borderRadius:2},children:"Informasi tracking belum tersedia"}),!v&&!w&&e.jsx(O,{severity:"info",sx:{borderRadius:2},children:"Klik tombol refresh untuk memuat detail tracking"})]})]})}),e.jsx(V,{elevation:0,sx:{borderRadius:3,border:`1px solid ${t.palette.divider}`},children:e.jsxs(Q,{sx:{p:3},children:[e.jsxs(j,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:3},children:[e.jsx(Ce,{color:"primary"}),e.jsxs(o,{variant:"h6",fontWeight:700,children:["Item Pesanan (",r.order_items.length,")"]})]}),e.jsx(j,{spacing:2,children:r.order_items.map(n=>{const m=n.product_variant.product.product_images?.[0]?.image_name;return e.jsxs(U,{elevation:0,sx:{display:"flex",alignItems:"center",gap:2,p:2.5,borderRadius:2,bgcolor:"grey.50",border:`1px solid ${t.palette.divider}`,transition:"all 0.2s ease","&:hover":{bgcolor:"grey.100",transform:"translateY(-2px)",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}},children:[e.jsx($e,{src:m?`/uploads/${m}`:`https://placehold.co/80x80/9682DB/FFFFFF/png?text=${encodeURIComponent(n.product_variant.product.name.substring(0,10))}`,alt:n.product_variant.product.name,sx:{width:90,height:90,borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},variant:"rounded"}),e.jsxs(S,{sx:{flex:1,minWidth:0},children:[e.jsx(o,{variant:"subtitle1",fontWeight:600,sx:{mb:1,color:"text.primary",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",lineHeight:1.3},title:n.product_variant.product.name,children:n.product_variant.product.name}),n.product_variant.variant_options&&n.product_variant.variant_options.length>0&&e.jsx(j,{direction:"row",spacing:.5,sx:{mb:1,flexWrap:"wrap"},children:n.product_variant.variant_options.map((_,A)=>e.jsx(oe,{label:_.option_value,size:"small",variant:"outlined",sx:{fontSize:"0.7rem",height:22,borderColor:"primary.main",color:"primary.main"}},A))}),e.jsxs(o,{variant:"body2",color:"text.secondary",children:["Qty: ",n.quantity," Ã— ",s(Number(n.price))]})]}),e.jsxs(S,{sx:{textAlign:"right",minWidth:120},children:[e.jsx(o,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem",mb:.5,display:"block"},children:"Total"}),e.jsx(o,{variant:"h6",color:"primary.main",fontWeight:700,children:s(Number(n.price)*Number(n.quantity))})]})]},n.id)})})]})})]})}),e.jsx(k,{item:!0,xs:12,lg:4,children:e.jsx(j,{spacing:3,children:e.jsx(V,{elevation:0,sx:{position:"sticky",top:24,borderRadius:3,border:`1px solid ${t.palette.divider}`},children:e.jsxs(Q,{sx:{p:3},children:[e.jsx(o,{variant:"h6",fontWeight:700,sx:{mb:3,color:"text.primary"},children:"Ringkasan Pesanan"}),e.jsxs(j,{spacing:2,children:[e.jsxs(S,{sx:{display:"flex",justifyContent:"space-between",py:2,px:2,bgcolor:"grey.50",borderRadius:2},children:[e.jsx(o,{variant:"body1",fontWeight:500,children:"Subtotal"}),e.jsx(o,{variant:"body1",fontWeight:600,children:s(Number(r.total_amount))})]}),e.jsxs(S,{sx:{display:"flex",justifyContent:"space-between",py:2,px:2,bgcolor:"grey.50",borderRadius:2},children:[e.jsx(o,{variant:"body1",fontWeight:500,children:"Biaya Pengiriman"}),e.jsx(o,{variant:"body1",fontWeight:600,children:s(Number(r.shipping_cost))})]}),e.jsxs(S,{sx:{display:"flex",justifyContent:"space-between",py:2.5,px:2.5,bgcolor:"primary.main",borderRadius:2,color:"white"},children:[e.jsx(o,{variant:"h6",fontWeight:700,children:"Total"}),e.jsx(o,{variant:"h6",fontWeight:700,children:s(Number(r.total_amount)+Number(r.shipping_cost))})]})]}),e.jsx(Le,{sx:{my:3}}),e.jsxs(j,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:2},children:[e.jsx(we,{color:"primary"}),e.jsx(o,{variant:"subtitle1",fontWeight:700,children:"Alamat Pengiriman"})]}),e.jsxs(U,{elevation:0,sx:{p:2,bgcolor:"grey.50",borderRadius:2},children:[e.jsx(o,{variant:"body1",fontWeight:600,sx:{mb:.5},children:r.address.address_line}),e.jsxs(o,{variant:"body2",color:"text.secondary",children:[r.address.city,", ",r.address.province," ",r.address.postal_code]})]})]})})})})]})]})})}export{Nt as default};
