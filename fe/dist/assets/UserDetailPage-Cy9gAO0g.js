import{c as W,j as e,a1 as B,q as U,r as c,a6 as z,C as d,B as a,t as m,T as s,v as A,F as h,R as T,U as j,aW as u,ak as w,W as g,al as L,a4 as E,x as H,aj as K}from"./index-Idy1NCQZ.js";import{u as R,A as G}from"./userApi-C36CzTcB.js";import{A as p}from"./ArrowBack-D5qFF9m1.js";import{A as S}from"./Alert-Cw7awSGM.js";import{A as F}from"./Avatar-BJbDu4KS.js";import{G as n}from"./Grid-CQRQWomO.js";import{C as y,a as f}from"./CardContent-5_xtjPDw.js";import{C as M}from"./CalendarToday-B6VuUJf4.js";import{H as O}from"./Home-BPVXMe6a.js";import{O as V}from"./Receipt-Rb_kuaO4.js";const q=W(e.jsx("path",{d:"M21 18v1c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2V5c0-1.1.89-2 2-2h14c1.1 0 2 .9 2 2v1h-9c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2zm-9-2h10V8H12zm4-2.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"AccountBalanceWallet");function te(){const{id:l}=B(),x=U(),[r,C]=c.useState(null),[_,b]=c.useState(!0),[v,I]=c.useState(null);c.useEffect(()=>{l&&k(l)},[l]);const k=async t=>{try{b(!0),I(null);const o=await R.getUserById(t);if(o.success)C(o.data);else throw new Error("Failed to fetch user detail")}catch(o){I(o.message||"Gagal memuat detail pengguna")}finally{b(!1)}},i=t=>new Date(t).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),D=t=>t==="admin"?"error":"default",P=t=>t==="admin"?e.jsx(G,{}):e.jsx(K,{});return _?e.jsx(z,{message:"Memuat detail pengguna..."}):v?e.jsxs(d,{maxWidth:!1,children:[e.jsx(a,{sx:{mb:3},children:e.jsx(m,{startIcon:e.jsx(p,{}),onClick:()=>x("/admin/users"),sx:{mb:2},children:"Kembali ke Daftar Pengguna"})}),e.jsx(S,{severity:"error",children:v})]}):r?e.jsxs(d,{maxWidth:!1,children:[e.jsxs(a,{sx:{mb:4},children:[e.jsx(m,{startIcon:e.jsx(p,{}),onClick:()=>x("/admin/users"),sx:{mb:2},children:"Kembali ke Daftar Pengguna"}),e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:3},children:[e.jsx(F,{sx:{width:80,height:80,bgcolor:"primary.main",fontSize:"2rem"},children:r.full_name.charAt(0).toUpperCase()}),e.jsxs(a,{children:[e.jsx(s,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:r.full_name}),e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[e.jsx(A,{icon:P(r.role),label:r.role==="admin"?"Admin":"User",color:D(r.role),size:"medium"}),e.jsxs(s,{variant:"body2",color:"textSecondary",children:["Bergabung: ",i(r.created_at)]})]}),e.jsxs(s,{variant:"body2",color:"textSecondary",children:["Terakhir diupdate: ",i(r.updated_at)]})]})]})]}),e.jsxs(n,{container:!0,spacing:3,children:[e.jsx(n,{xs:12,md:6,children:e.jsx(y,{children:e.jsxs(f,{children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Informasi Pengguna"}),e.jsx(h,{sx:{mb:2}}),e.jsxs(T,{children:[e.jsxs(j,{children:[e.jsx(u,{children:e.jsx(w,{color:"primary"})}),e.jsx(g,{primary:"Email",secondary:r.email})]}),r.phone&&e.jsxs(j,{children:[e.jsx(u,{children:e.jsx(L,{color:"primary"})}),e.jsx(g,{primary:"Telepon",secondary:r.phone})]}),e.jsxs(j,{children:[e.jsx(u,{children:e.jsx(M,{color:"primary"})}),e.jsx(g,{primary:"Tanggal Dibuat",secondary:i(r.created_at)})]})]})]})})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(y,{children:e.jsxs(f,{children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Statistik Pengguna"}),e.jsx(h,{sx:{mb:2}}),e.jsxs(n,{container:!0,spacing:2,children:[e.jsx(n,{item:!0,xs:6,children:e.jsxs(a,{sx:{textAlign:"center",p:2},children:[e.jsx(O,{color:"primary",sx:{fontSize:40,mb:1}}),e.jsx(s,{variant:"h4",fontWeight:"bold",children:r._count?.addresses||0}),e.jsx(s,{variant:"body2",color:"textSecondary",children:"Alamat"})]})}),e.jsx(n,{item:!0,xs:6,children:e.jsxs(a,{sx:{textAlign:"center",p:2},children:[e.jsx(E,{color:"primary",sx:{fontSize:40,mb:1}}),e.jsx(s,{variant:"h4",fontWeight:"bold",children:r._count?.cart_items||0}),e.jsx(s,{variant:"body2",color:"textSecondary",children:"Item Keranjang"})]})}),e.jsx(n,{item:!0,xs:6,children:e.jsxs(a,{sx:{textAlign:"center",p:2},children:[e.jsx(V,{color:"primary",sx:{fontSize:40,mb:1}}),e.jsx(s,{variant:"h4",fontWeight:"bold",children:r._count?.orders||0}),e.jsx(s,{variant:"body2",color:"textSecondary",children:"Pesanan"})]})}),e.jsx(n,{item:!0,xs:6,children:e.jsxs(a,{sx:{textAlign:"center",p:2},children:[e.jsx(q,{color:"primary",sx:{fontSize:40,mb:1}}),e.jsx(s,{variant:"h4",fontWeight:"bold",children:r._count?.transactions||0}),e.jsx(s,{variant:"body2",color:"textSecondary",children:"Transaksi"})]})})]})]})})}),r.addresses&&r.addresses.length>0&&e.jsx(n,{item:!0,xs:12,children:e.jsx(y,{children:e.jsxs(f,{children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Alamat Pengguna"}),e.jsx(h,{sx:{mb:2}}),e.jsx(n,{container:!0,spacing:2,children:r.addresses.map(t=>e.jsx(n,{item:!0,xs:12,md:6,children:e.jsxs(H,{sx:{p:2,bgcolor:t.is_primary?"primary.light":"grey.50"},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[e.jsx(s,{variant:"subtitle2",fontWeight:"medium",children:t.is_primary?"Alamat Utama":"Alamat Tambahan"}),t.is_primary&&e.jsx(A,{label:"Utama",size:"small",color:"primary"})]}),e.jsx(s,{variant:"body2",sx:{mb:1},children:t.address_line}),e.jsxs(s,{variant:"body2",color:"textSecondary",children:[t.city,", ",t.province," ",t.postal_code]}),e.jsxs(s,{variant:"caption",color:"textSecondary",sx:{mt:1,display:"block"},children:["Dibuat: ",i(t.created_at)]})]})},t.id))})]})})})]})]}):e.jsxs(d,{maxWidth:!1,children:[e.jsx(a,{sx:{mb:3},children:e.jsx(m,{startIcon:e.jsx(p,{}),onClick:()=>x("/admin/users"),sx:{mb:2},children:"Kembali ke Daftar Pengguna"})}),e.jsx(S,{severity:"warning",children:"Pengguna tidak ditemukan"})]})}export{te as default};
