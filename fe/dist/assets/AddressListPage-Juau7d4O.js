import{u as D,r as l,j as e,S as c,B as d,a9 as f,T as n,e as z,a0 as I,i as A,a as F,C as v,$ as C,al as L,b as k}from"./index-DVLSGWYZ.js";import{a as w}from"./addressApi-B6xq4cwq.js";import{u as P,A as G}from"./AddressForm-D_yK3ywd.js";import{C as H,a as U}from"./CardContent-DCJIVk1m.js";import{E as K}from"./Edit-DzfA9IsF.js";import{D as N}from"./Delete-4b1S9yqQ.js";import{S as Y}from"./Skeleton-KFRaNZZc.js";import{B as q}from"./Breadcrumbs-CTwzKUk5.js";import{A as S}from"./Add-0Q1eCPNm.js";import{A as J}from"./Alert-DeMLxQ5q.js";import{D as M,a as O,b as Q}from"./DialogTitle-DvisQaRg.js";import"./FormControlLabel-BjLk7wiJ.js";import"./Switch-DZq5obZm.js";function V({address:a,onEdit:x,onDelete:u,onUpdate:h}){const t=D(),[o,p]=l.useState(!1),i=async()=>{if(window.confirm("Apakah Anda yakin ingin menghapus alamat ini?"))try{p(!0),(await w.deleteAddress(a.id)).success&&(u(a),h())}catch(s){console.error("Error deleting address:",s),alert(s.response?.data?.error||"Gagal menghapus alamat")}finally{p(!1)}},m=s=>new Date(s).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"});return e.jsx(H,{sx:{border:a.is_primary?`2px solid ${t.palette.primary.main}`:`1px solid ${t.palette.grey[300]}`,borderRadius:2,transition:"all 0.2s ease",backgroundColor:a.is_primary?t.palette.primary.light+"10":"transparent","&:hover":{boxShadow:"0 4px 12px rgba(0,0,0,0.1)",transform:"translateY(-2px)"}},children:e.jsx(U,{children:e.jsxs(c,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",spacing:2,children:[e.jsxs(d,{sx:{flex:1,minWidth:0},children:[e.jsxs(c,{direction:"row",alignItems:"center",spacing:1,sx:{mb:2},children:[e.jsx(f,{color:"primary"}),e.jsx(n,{variant:"h6",fontWeight:600,children:"Alamat"}),a.is_primary&&e.jsx(z,{label:"Utama",color:"primary",size:"small",variant:"outlined",icon:e.jsx(I,{})})]}),e.jsx(n,{variant:"body1",fontWeight:500,sx:{mb:1},children:a.address_line}),e.jsxs(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:[a.city,", ",a.province," ",a.postal_code]}),e.jsxs(n,{variant:"caption",color:"text.secondary",children:["Ditambahkan pada ",m(a.created_at)]})]}),e.jsxs(c,{direction:"row",spacing:1,children:[e.jsx(A,{onClick:()=>x(a),color:"primary",sx:{border:`1px solid ${t.palette.primary.light}`,"&:hover":{backgroundColor:t.palette.primary.light+"20"}},children:e.jsx(K,{})}),e.jsx(A,{onClick:i,disabled:o,color:"error",sx:{border:`1px solid ${t.palette.error.light}`,"&:hover":{backgroundColor:t.palette.error.light+"20"}},children:e.jsx(N,{})})]})]})})})}function xe(){const a=D(),x=F(),[u,h]=l.useState(!0),[t,o]=l.useState(null),[p,i]=l.useState(!1),[m,s]=l.useState(null),{addresses:j,setAddresses:E,addAddress:W,updateAddress:B,removeAddress:X}=P(),g=async()=>{try{h(!0),o(null);const r=await w.getAddresses();r.success?E(r.data):o("Gagal memuat alamat")}catch(r){console.error("Error fetching addresses:",r),o(r.response?.data?.error||"Gagal memuat alamat")}finally{h(!1)}},y=()=>{s(null),i(!0)},T=r=>{s(r),i(!0)},R=r=>{g()},_=r=>{m?B(r.id,r):W(r),i(!1),s(null)},b=()=>{i(!1),s(null)};return l.useEffect(()=>{g()},[]),u?e.jsx(d,{sx:{minHeight:"100vh",py:4},children:e.jsx(v,{maxWidth:"lg",children:e.jsx(c,{spacing:2,children:[...Array(3)].map((r,$)=>e.jsx(Y,{variant:"rectangular",height:120,sx:{borderRadius:2}},$))})})}):e.jsx(d,{sx:{minHeight:"100vh",py:4},children:e.jsxs(v,{maxWidth:"lg",children:[e.jsxs(q,{sx:{mb:4},children:[e.jsxs(C,{component:"button",variant:"body2",onClick:()=>x("/"),sx:{display:"flex",alignItems:"center",textDecoration:"none",color:"text.secondary","&:hover":{color:"primary.main"}},children:[e.jsx(I,{sx:{mr:.5,fontSize:"1rem"}}),"Beranda"]}),e.jsxs(C,{component:"button",variant:"body2",onClick:()=>x("/profile"),sx:{display:"flex",alignItems:"center",textDecoration:"none",color:"text.secondary","&:hover":{color:"primary.main"}},children:[e.jsx(L,{sx:{mr:.5,fontSize:"1rem"}}),"Profil"]}),e.jsxs(n,{variant:"body2",color:"text.primary",sx:{display:"flex",alignItems:"center"},children:[e.jsx(f,{sx:{mr:.5,fontSize:"1rem"}}),"Alamat"]})]}),e.jsx(d,{sx:{mb:4},children:e.jsxs(c,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(d,{children:[e.jsx(n,{variant:"h4",fontWeight:700,sx:{mb:1},children:"Daftar Alamat"}),e.jsx(n,{variant:"body1",color:"text.secondary",children:"Kelola alamat pengiriman Anda"})]}),e.jsx(k,{variant:"contained",startIcon:e.jsx(S,{}),onClick:y,sx:{borderRadius:2},children:"Tambah Alamat"})]})}),t&&e.jsx(J,{severity:"error",sx:{mb:4},onClose:()=>o(null),children:t}),j.length===0?e.jsxs(d,{sx:{textAlign:"center",py:8,px:4,borderRadius:3,background:"linear-gradient(135deg, #faf8ff 0%, #f0f4ff 100%)",border:`1px solid ${a.palette.primary.light}20`},children:[e.jsx(f,{sx:{fontSize:64,color:"text.secondary",mb:2}}),e.jsx(n,{variant:"h6",color:"text.secondary",fontWeight:600,sx:{mb:1},children:"Belum Ada Alamat"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Tambahkan alamat pengiriman untuk memudahkan proses checkout"}),e.jsx(k,{variant:"contained",startIcon:e.jsx(S,{}),onClick:y,sx:{borderRadius:2},children:"Tambah Alamat Pertama"})]}):e.jsx(c,{spacing:3,children:j.map(r=>e.jsx(V,{address:r,onEdit:T,onDelete:R,onUpdate:g},r.id))}),e.jsxs(M,{open:p,onClose:b,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:3}},children:[e.jsx(O,{children:e.jsx(n,{variant:"h6",fontWeight:600,children:m?"Edit Alamat":"Tambah Alamat Baru"})}),e.jsx(Q,{sx:{p:0},children:e.jsx(G,{address:m||void 0,onSuccess:_,onCancel:b})})]})]})})}export{xe as default};
