import{X as W,aa as k,ab as S,u as w,a as E,r as d,j as e,B as t,C as x,$ as D,a0 as A,T as r,al as T,S as o,R as B,e as p,am as L,an as R,D as l}from"./index-BNHkdQXN.js";import{S as _}from"./Skeleton-C7Iai6me.js";import{A as z}from"./Alert-CGwzUP-j.js";import{B as H}from"./Breadcrumbs-CE1cFXMC.js";import{C as y,a as b}from"./CardContent-Xxy-Rqsq.js";import{C as N}from"./CalendarToday-Dq5Sg33P.js";const G={getProfile:async()=>(await W.get("/auth/me")).data},U=k()(S(s=>({profile:null,loading:!1,error:null,setProfile:i=>s({profile:i}),setLoading:i=>s({loading:i}),setError:i=>s({error:i}),clearError:()=>s({error:null}),clearProfile:()=>s({profile:null})}),{name:"profile-storage",partialize:s=>({profile:s.profile})}));function K(){const s=w(),i=E(),[v,h]=d.useState(!0),[m,c]=d.useState(null),{profile:a,setProfile:I,setError:P}=U(),C=async()=>{try{h(!0),c(null);const n=await G.getProfile();n.success?I(n.user):c("Gagal memuat profil")}catch(n){console.error("Error fetching profile:",n);const j=n.response?.data?.error||"Gagal memuat profil";c(j),P(j)}finally{h(!1)}};d.useEffect(()=>{C()},[]);const u=n=>new Date(n).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),f=n=>{switch(n){case"admin":return"error";case"customer":return"primary";default:return"default"}},g=n=>{switch(n){case"admin":return"Administrator";case"customer":return"Customer";default:return n}};return v?e.jsx(t,{sx:{minHeight:"100vh",py:4},children:e.jsx(x,{maxWidth:"lg",children:e.jsx(_,{variant:"rectangular",height:400,sx:{borderRadius:3}})})}):m||!a?e.jsx(t,{sx:{minHeight:"100vh",py:4},children:e.jsx(x,{maxWidth:"lg",children:e.jsx(z,{severity:"error",sx:{maxWidth:600,mx:"auto"},children:m||"Profil tidak ditemukan"})})}):e.jsx(t,{sx:{minHeight:"100vh",py:4},children:e.jsxs(x,{maxWidth:"lg",children:[e.jsxs(H,{sx:{mb:4},children:[e.jsxs(D,{component:"button",variant:"body2",onClick:()=>i("/"),sx:{display:"flex",alignItems:"center",textDecoration:"none",color:"text.secondary","&:hover":{color:"primary.main"}},children:[e.jsx(A,{sx:{mr:.5,fontSize:"1rem"}}),"Beranda"]}),e.jsxs(r,{variant:"body2",color:"text.primary",sx:{display:"flex",alignItems:"center"},children:[e.jsx(T,{sx:{mr:.5,fontSize:"1rem"}}),"Profil"]})]}),e.jsxs(t,{sx:{mb:4},children:[e.jsx(r,{variant:"h4",fontWeight:700,sx:{mb:1},children:"Profil Pengguna"}),e.jsx(r,{variant:"body1",color:"text.secondary",children:"Informasi akun dan pengaturan profil Anda"})]}),e.jsx(y,{sx:{mb:4},children:e.jsx(b,{sx:{p:4},children:e.jsxs(o,{direction:{xs:"column",md:"row"},spacing:4,alignItems:"center",children:[e.jsx(B,{sx:{width:120,height:120,backgroundColor:s.palette.primary.main,fontSize:"3rem",fontWeight:600},children:a.full_name.charAt(0).toUpperCase()}),e.jsxs(t,{sx:{flex:1,minWidth:0},children:[e.jsxs(o,{direction:"row",alignItems:"center",spacing:2,sx:{mb:2},children:[e.jsx(r,{variant:"h4",fontWeight:700,children:a.full_name}),e.jsx(p,{label:g(a.role),color:f(a.role),variant:"outlined"})]}),e.jsxs(o,{spacing:2,children:[e.jsxs(o,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(L,{color:"action"}),e.jsx(r,{variant:"body1",color:"text.secondary",children:a.email})]}),e.jsxs(o,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(R,{color:"action"}),e.jsx(r,{variant:"body1",color:"text.secondary",children:a.phone||"Tidak ada nomor telepon"})]}),e.jsxs(o,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(N,{color:"action"}),e.jsxs(r,{variant:"body2",color:"text.secondary",children:["Bergabung pada ",u(a.created_at)]})]})]})]})]})})}),e.jsx(y,{children:e.jsxs(b,{sx:{p:4},children:[e.jsx(r,{variant:"h6",fontWeight:600,sx:{mb:3},children:"Informasi Akun"}),e.jsxs(o,{spacing:3,children:[e.jsxs(t,{children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",sx:{mb:1},children:"ID Pengguna"}),e.jsx(r,{variant:"body1",fontWeight:500,children:a.id})]}),e.jsx(l,{}),e.jsxs(t,{children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",sx:{mb:1},children:"Email"}),e.jsx(r,{variant:"body1",fontWeight:500,children:a.email})]}),e.jsx(l,{}),e.jsxs(t,{children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",sx:{mb:1},children:"Nama Lengkap"}),e.jsx(r,{variant:"body1",fontWeight:500,children:a.full_name})]}),e.jsx(l,{}),e.jsxs(t,{children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",sx:{mb:1},children:"Nomor Telepon"}),e.jsx(r,{variant:"body1",fontWeight:500,children:a.phone||"Tidak ada nomor telepon"})]}),e.jsx(l,{}),e.jsxs(t,{children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",sx:{mb:1},children:"Role"}),e.jsx(p,{label:g(a.role),color:f(a.role),variant:"outlined"})]}),e.jsx(l,{}),e.jsxs(t,{children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",sx:{mb:1},children:"Terakhir Diupdate"}),e.jsx(r,{variant:"body1",fontWeight:500,children:u(a.updated_at)})]})]})]})})]})})}export{K as default};
