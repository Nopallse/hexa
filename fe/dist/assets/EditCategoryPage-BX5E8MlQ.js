import{q as k,a8 as v,aB as E,r as i,j as e,af as I,C as u,B as x,ao as m,v as w,T as d,z as f}from"./index-CjRkbdsW.js";import{C as B}from"./CategoryForm-BPZxVVek.js";import{A as K}from"./Alert-CYapFDnR.js";import{B as L}from"./Breadcrumbs-j1g_dcXs.js";import{H as A}from"./Home-C_Jl3ZFE.js";import"./schemas-KU9HdpT8.js";import"./image-CeHRN-zl.js";import"./CardContent-bGHhza-V.js";import"./CloudUpload-HJqGmVTU.js";import"./Delete-B09AsXFo.js";function M(){const a=k(),{id:r}=v(),{showNotification:p}=E(),[s,y]=i.useState(null),[h,c]=i.useState(!0),[b,g]=i.useState(!1),[l,o]=i.useState(null),j=async()=>{if(!r){o("ID kategori tidak valid"),c(!1);return}try{c(!0),o(null);const t=await f.getCategoryById(r);if(t.success)y(t.data);else throw new Error("Failed to fetch category")}catch(t){o(t.message||"Gagal memuat data kategori")}finally{c(!1)}};i.useEffect(()=>{j()},[r]);const C=async t=>{if(r)try{g(!0),o(null);const n=await f.updateCategory(r,t);if(n.success)p({type:"success",message:"Kategori berhasil diperbarui"}),a("/admin/categories");else throw new Error(n.message||"Failed to update category")}catch(n){o(n.message||"Gagal memperbarui kategori")}finally{g(!1)}},S=()=>{a("/admin/categories")};return h?e.jsx(I,{message:"Memuat data kategori..."}):l&&!s?e.jsxs(u,{maxWidth:"lg",children:[e.jsx(K,{severity:"error",sx:{mt:3},children:l}),e.jsx(x,{sx:{mt:2,textAlign:"center"},children:e.jsx(m,{component:"button",onClick:()=>a("/admin/categories"),children:"Kembali ke Daftar Kategori"})})]}):e.jsxs(u,{maxWidth:"lg",children:[e.jsxs(L,{sx:{mb:3},children:[e.jsxs(m,{component:"button",variant:"body2",onClick:()=>a("/admin"),sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(A,{fontSize:"small"}),"Dashboard"]}),e.jsxs(m,{component:"button",variant:"body2",onClick:()=>a("/admin/categories"),sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(w,{fontSize:"small"}),"Kategori"]}),e.jsxs(d,{variant:"body2",color:"textPrimary",children:["Edit ",s?.name]})]}),e.jsxs(x,{sx:{mb:4},children:[e.jsx(d,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:"Edit Kategori"}),e.jsxs(d,{variant:"body1",color:"textSecondary",children:["Perbarui informasi kategori ",s?.name]})]}),s&&e.jsx(B,{mode:"edit",category:s,isLoading:b,error:l,onSubmit:C,onCancel:S})]})}export{M as default};
