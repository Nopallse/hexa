import{q as W,a8 as E,aB as K,r as o,j as e,af as L,C as p,t as d,ao as y,v as A,T as a,B as r,w as T,N as g,z as b}from"./index-D0K_J5MH.js";import{g as P}from"./image-CeHRN-zl.js";import{A as z}from"./Alert-D2FNR8Ya.js";import{A as k}from"./ArrowBack-B62uZwv8.js";import{B as H}from"./Breadcrumbs-DQSd1Cz1.js";import{H as _}from"./Home-CZoMJq0w.js";import{E as F}from"./Edit-xqQzbt_u.js";import{D as M}from"./Delete-BY8eW1nK.js";import{C as v,a as D}from"./CardContent-7fkJvOwG.js";import{C as N}from"./CardMedia-CWMZvEzf.js";function Y(){const s=W(),{id:l}=E(),{showNotification:x}=K(),[t,C]=o.useState(null),[I,c]=o.useState(!0),[h,u]=o.useState(!1),[f,m]=o.useState(null),S=async()=>{if(!l){m("ID kategori tidak valid"),c(!1);return}try{c(!0),m(null);const i=await b.getCategoryById(l);if(i.success)C(i.data);else throw new Error("Failed to fetch category")}catch(i){m(i.message||"Gagal memuat data kategori")}finally{c(!1)}};o.useEffect(()=>{S()},[l]);const B=()=>{t&&s(`/admin/categories/${t.id}/edit`)},w=async()=>{if(!(!t||!window.confirm(`Apakah Anda yakin ingin menghapus kategori "${t.name}"? Tindakan ini tidak dapat dibatalkan.`)))try{u(!0);const n=await b.deleteCategory(t.id);if(n.success)x({type:"success",message:"Kategori berhasil dihapus"}),s("/admin/categories");else throw new Error(n.message||"Failed to delete category")}catch(n){x({type:"error",message:n.message||"Gagal menghapus kategori"})}finally{u(!1)}},j=()=>{s("/admin/categories")};return I?e.jsx(L,{message:"Memuat data kategori..."}):f||!t?e.jsxs(p,{maxWidth:!1,children:[e.jsx(z,{severity:"error",sx:{mb:3},children:f||"Kategori tidak ditemukan"}),e.jsx(d,{variant:"outlined",startIcon:e.jsx(k,{}),onClick:j,children:"Kembali ke Daftar Kategori"})]}):e.jsxs(p,{maxWidth:!1,children:[e.jsxs(H,{sx:{mb:3},children:[e.jsxs(y,{component:"button",variant:"body2",onClick:()=>s("/admin"),sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(_,{fontSize:"small"}),"Dashboard"]}),e.jsxs(y,{component:"button",variant:"body2",onClick:()=>s("/admin/categories"),sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(A,{fontSize:"small"}),"Kategori"]}),e.jsx(a,{variant:"body2",color:"textPrimary",children:t.name})]}),e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[e.jsxs(r,{children:[e.jsx(a,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:"Detail Kategori"}),e.jsxs(a,{variant:"body1",color:"textSecondary",children:['Informasi lengkap kategori "',t.name,'"']})]}),e.jsxs(r,{sx:{display:"flex",gap:2},children:[e.jsx(d,{variant:"outlined",startIcon:e.jsx(k,{}),onClick:j,children:"Kembali"}),e.jsx(d,{variant:"contained",startIcon:e.jsx(F,{}),onClick:B,children:"Edit"}),e.jsx(d,{variant:"outlined",color:"error",startIcon:e.jsx(M,{}),onClick:w,disabled:h,children:h?"Menghapus...":"Hapus"})]})]}),e.jsxs(v,{children:[t.image&&e.jsx(N,{component:"img",height:"300",image:P(t.image),alt:t.name,sx:{objectFit:"cover",bgcolor:"grey.100"}}),e.jsxs(D,{children:[e.jsxs(r,{sx:{mb:3},children:[e.jsx(a,{variant:"h5",fontWeight:"bold",gutterBottom:!0,children:t.name}),e.jsx(T,{label:"Aktif",color:"success",size:"small",sx:{mb:2}})]}),e.jsx(g,{sx:{mb:3}}),e.jsxs(r,{sx:{mb:3},children:[e.jsx(a,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:"Deskripsi"}),e.jsx(a,{variant:"body1",color:"textSecondary",children:t.description||"Tidak ada deskripsi"})]}),e.jsx(g,{sx:{mb:3}}),e.jsxs(r,{sx:{mb:3},children:[e.jsx(a,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:"Produk dalam Kategori"}),t.products&&t.products.length>0?e.jsx(r,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:2},children:t.products.map(i=>e.jsx(v,{variant:"outlined",children:e.jsxs(D,{children:[e.jsx(a,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:i.name}),e.jsxs(a,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:["Harga: Rp ",parseInt(i.price).toLocaleString("id-ID")]}),e.jsxs(a,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:["Stok: ",i.stock]}),e.jsxs(a,{variant:"caption",color:"textSecondary",children:["Dibuat: ",new Date(i.created_at).toLocaleDateString("id-ID")]})]})},i.id))}):e.jsx(a,{variant:"body2",color:"textSecondary",children:"Belum ada produk dalam kategori ini"})]}),e.jsx(g,{sx:{mb:3}}),e.jsxs(r,{sx:{mb:3},children:[e.jsx(a,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:"Informasi Sistem"}),e.jsxs(r,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:2},children:[e.jsxs(r,{children:[e.jsx(a,{variant:"body2",color:"textSecondary",children:"ID Kategori"}),e.jsx(a,{variant:"body1",fontWeight:"medium",children:t.id})]}),e.jsxs(r,{children:[e.jsx(a,{variant:"body2",color:"textSecondary",children:"Dibuat Pada"}),e.jsx(a,{variant:"body1",fontWeight:"medium",children:new Date(t.created_at).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.jsxs(r,{children:[e.jsx(a,{variant:"body2",color:"textSecondary",children:"Diperbarui Pada"}),e.jsx(a,{variant:"body1",fontWeight:"medium",children:t.updated_at?new Date(t.updated_at).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"})]})]})]})]})]})]})}export{Y as default};
