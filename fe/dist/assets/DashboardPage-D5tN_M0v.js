import{ae as L,q as _,r as m,j as e,af as B,C as y,t as u,B as s,T as r,ac as p,P as G,aA as E,ag as f,w as v,I as C}from"./index-5OgQjLSC.js";import{u as N}from"./useCurrencyConversion-Qw05_SY9.js";import{A as k}from"./Alert-3VKlMIM5.js";import{R as S}from"./Refresh-Byc4XcDD.js";import{G as n}from"./Grid-DC0V799Y.js";import{C as l,a as d}from"./CardContent-ngkvzqv4.js";import{A as O}from"./AttachMoney-LhE1JI5c.js";import{T as w,a as I,b as R,c,d as o,e as T}from"./TableRow-CXYZx9vg.js";import{T as W}from"./Tooltip-CoK2AUtP.js";import{V as P}from"./Visibility-C9za9tFr.js";import"./Popper-C_GdxfKp.js";const F={getDashboardStats:async()=>{try{return(await L.get("/admin/dashboard/stats")).data}catch(t){return{success:!1,error:t.response?.data?.error||t.message}}}},M=t=>{switch(t){case"belum_bayar":return"warning";case"dikemas":return"primary";case"dikirim":return"info";case"diterima":return"success";case"dibatalkan":return"error";default:return"default"}},V=t=>{switch(t){case"belum_bayar":return"Belum Bayar";case"dikemas":return"Dikemas";case"dikirim":return"Dikirim";case"diterima":return"Diterima";case"dibatalkan":return"Dibatalkan";default:return t}},$=t=>{switch(t?.toLowerCase()){case"paid":return"success";case"pending":return"warning";case"failed":return"error";default:return"default"}},q=t=>{switch(t?.toLowerCase()){case"paid":return"Lunas";case"pending":return"Pending";case"failed":return"Gagal";default:return t}},A=t=>new Date(t).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});function ae(){const t=_(),{formatPrice:j}=N(),[i,D]=m.useState(null),[z,b]=m.useState(!0),[x,h]=m.useState(null),g=async()=>{try{b(!0),h(null);const a=await F.getDashboardStats();a.success&&a.data?D(a.data):h(a.error||"Gagal memuat data dashboard")}catch(a){h(a.response?.data?.error||"Gagal memuat data dashboard")}finally{b(!1)}};return m.useEffect(()=>{g()},[]),z?e.jsx(B,{message:"Memuat data dashboard..."}):x&&!i?e.jsxs(y,{maxWidth:"xl",sx:{py:4},children:[e.jsx(k,{severity:"error",sx:{mb:3},children:x}),e.jsx(u,{startIcon:e.jsx(S,{}),onClick:g,children:"Coba Lagi"})]}):i?e.jsxs(y,{maxWidth:"xl",sx:{py:4},children:[e.jsxs(s,{sx:{mb:4,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(s,{children:[e.jsx(r,{variant:"h4",fontWeight:700,color:"text.primary",gutterBottom:!0,children:"Dashboard Admin"}),e.jsx(r,{variant:"body1",color:"text.secondary",children:"Ringkasan statistik dan informasi penting"})]}),e.jsx(u,{variant:"outlined",startIcon:e.jsx(S,{}),onClick:g,sx:{borderRadius:2,px:3,py:1},children:"Refresh"})]}),x&&e.jsx(k,{severity:"error",sx:{mb:3},onClose:()=>h(null),children:x}),e.jsxs(n,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(n,{item:!0,xs:12,sm:6,md:3,children:e.jsx(l,{sx:{borderRadius:3,boxShadow:"0 4px 16px rgba(150, 130, 219, 0.12)",border:"1px solid rgba(150, 130, 219, 0.08)",height:"100%",background:"linear-gradient(135deg, rgba(150, 130, 219, 0.1) 0%, rgba(150, 130, 219, 0.05) 100%)"},children:e.jsx(d,{sx:{p:3},children:e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(s,{children:[e.jsx(r,{variant:"h4",fontWeight:700,color:"text.primary",children:i.orders.total}),e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:"Total Pesanan"})]}),e.jsx(s,{sx:{p:2,borderRadius:"50%",backgroundColor:"primary.main",color:"white",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(p,{sx:{fontSize:"2rem"}})})]})})})}),e.jsx(n,{item:!0,xs:12,sm:6,md:3,children:e.jsx(l,{sx:{borderRadius:3,boxShadow:"0 4px 16px rgba(39, 174, 96, 0.12)",border:"1px solid rgba(39, 174, 96, 0.08)",height:"100%",background:"linear-gradient(135deg, rgba(39, 174, 96, 0.1) 0%, rgba(39, 174, 96, 0.05) 100%)"},children:e.jsx(d,{sx:{p:3},children:e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(s,{children:[e.jsx(r,{variant:"h4",fontWeight:700,color:"text.primary",children:j(i.payments.revenue)}),e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:"Total Pendapatan"})]}),e.jsx(s,{sx:{p:2,borderRadius:"50%",backgroundColor:"success.main",color:"white",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(O,{sx:{fontSize:"2rem"}})})]})})})}),e.jsx(n,{item:!0,xs:12,sm:6,md:3,children:e.jsx(l,{sx:{borderRadius:3,boxShadow:"0 4px 16px rgba(243, 156, 18, 0.12)",border:"1px solid rgba(243, 156, 18, 0.08)",height:"100%",background:"linear-gradient(135deg, rgba(243, 156, 18, 0.1) 0%, rgba(243, 156, 18, 0.05) 100%)"},children:e.jsx(d,{sx:{p:3},children:e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(s,{children:[e.jsx(r,{variant:"h4",fontWeight:700,color:"text.primary",children:i.users.total}),e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:"Total Pengguna"})]}),e.jsx(s,{sx:{p:2,borderRadius:"50%",backgroundColor:"warning.main",color:"white",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(G,{sx:{fontSize:"2rem"}})})]})})})}),e.jsx(n,{item:!0,xs:12,sm:6,md:3,children:e.jsx(l,{sx:{borderRadius:3,boxShadow:"0 4px 16px rgba(52, 152, 219, 0.12)",border:"1px solid rgba(52, 152, 219, 0.08)",height:"100%",background:"linear-gradient(135deg, rgba(52, 152, 219, 0.1) 0%, rgba(52, 152, 219, 0.05) 100%)"},children:e.jsx(d,{sx:{p:3},children:e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(s,{children:[e.jsx(r,{variant:"h4",fontWeight:700,color:"text.primary",children:i.products.active}),e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:"Produk Aktif"})]}),e.jsx(s,{sx:{p:2,borderRadius:"50%",backgroundColor:"info.main",color:"white",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(E,{sx:{fontSize:"2rem"}})})]})})})})]}),e.jsxs(n,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(l,{sx:{borderRadius:3,boxShadow:"0 4px 16px rgba(150, 130, 219, 0.12)"},children:e.jsxs(d,{sx:{p:3},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:3},children:[e.jsx(p,{sx:{fontSize:"1.5rem",color:"primary.main"}}),e.jsx(r,{variant:"h6",fontWeight:600,children:"Status Pesanan"})]}),e.jsxs(n,{container:!0,spacing:2,children:[e.jsx(n,{item:!0,xs:6,children:e.jsxs(s,{sx:{textAlign:"center",p:2,borderRadius:2,backgroundColor:"rgba(243, 156, 18, 0.1)"},children:[e.jsx(r,{variant:"h5",fontWeight:700,color:"warning.main",children:i.orders.byStatus.belum_bayar}),e.jsx(r,{variant:"caption",color:"text.secondary",children:"Belum Bayar"})]})}),e.jsx(n,{item:!0,xs:6,children:e.jsxs(s,{sx:{textAlign:"center",p:2,borderRadius:2,backgroundColor:"rgba(150, 130, 219, 0.1)"},children:[e.jsx(r,{variant:"h5",fontWeight:700,color:"primary.main",children:i.orders.byStatus.dikemas}),e.jsx(r,{variant:"caption",color:"text.secondary",children:"Dikemas"})]})}),e.jsx(n,{item:!0,xs:6,children:e.jsxs(s,{sx:{textAlign:"center",p:2,borderRadius:2,backgroundColor:"rgba(52, 152, 219, 0.1)"},children:[e.jsx(r,{variant:"h5",fontWeight:700,color:"info.main",children:i.orders.byStatus.dikirim}),e.jsx(r,{variant:"caption",color:"text.secondary",children:"Dikirim"})]})}),e.jsx(n,{item:!0,xs:6,children:e.jsxs(s,{sx:{textAlign:"center",p:2,borderRadius:2,backgroundColor:"rgba(39, 174, 96, 0.1)"},children:[e.jsx(r,{variant:"h5",fontWeight:700,color:"success.main",children:i.orders.byStatus.diterima}),e.jsx(r,{variant:"caption",color:"text.secondary",children:"Diterima"})]})})]})]})})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(l,{sx:{borderRadius:3,boxShadow:"0 4px 16px rgba(150, 130, 219, 0.12)"},children:e.jsxs(d,{sx:{p:3},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:3},children:[e.jsx(f,{sx:{fontSize:"1.5rem",color:"primary.main"}}),e.jsx(r,{variant:"h6",fontWeight:600,children:"Pembayaran & Pengiriman"})]}),e.jsxs(n,{container:!0,spacing:2,children:[e.jsx(n,{item:!0,xs:6,children:e.jsxs(s,{sx:{textAlign:"center",p:2,borderRadius:2,backgroundColor:"rgba(39, 174, 96, 0.1)"},children:[e.jsx(r,{variant:"h5",fontWeight:700,color:"success.main",children:i.payments.paid}),e.jsx(r,{variant:"caption",color:"text.secondary",children:"Lunas"})]})}),e.jsx(n,{item:!0,xs:6,children:e.jsxs(s,{sx:{textAlign:"center",p:2,borderRadius:2,backgroundColor:"rgba(243, 156, 18, 0.1)"},children:[e.jsx(r,{variant:"h5",fontWeight:700,color:"warning.main",children:i.payments.pending}),e.jsx(r,{variant:"caption",color:"text.secondary",children:"Pending"})]})}),e.jsx(n,{item:!0,xs:6,children:e.jsxs(s,{sx:{textAlign:"center",p:2,borderRadius:2,backgroundColor:"rgba(52, 152, 219, 0.1)"},children:[e.jsx(r,{variant:"h5",fontWeight:700,color:"info.main",children:i.shipping.inTransit}),e.jsx(r,{variant:"caption",color:"text.secondary",children:"Dalam Perjalanan"})]})}),e.jsx(n,{item:!0,xs:6,children:e.jsxs(s,{sx:{textAlign:"center",p:2,borderRadius:2,backgroundColor:"rgba(39, 174, 96, 0.1)"},children:[e.jsx(r,{variant:"h5",fontWeight:700,color:"success.main",children:i.shipping.delivered}),e.jsx(r,{variant:"caption",color:"text.secondary",children:"Terkirim"})]})})]})]})})})]}),e.jsxs(n,{container:!0,spacing:3,children:[e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(l,{sx:{borderRadius:3,boxShadow:"0 4px 16px rgba(150, 130, 219, 0.12)"},children:e.jsxs(d,{sx:{p:3},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(p,{sx:{fontSize:"1.5rem",color:"primary.main"}}),e.jsx(r,{variant:"h6",fontWeight:600,children:"Pesanan Terbaru"})]}),e.jsx(u,{size:"small",onClick:()=>t("/admin/orders"),sx:{textTransform:"none"},children:"Lihat Semua"})]}),e.jsx(w,{children:e.jsxs(I,{size:"small",children:[e.jsx(R,{children:e.jsxs(c,{children:[e.jsx(o,{children:"Customer"}),e.jsx(o,{children:"Status"}),e.jsx(o,{align:"right",children:"Total"}),e.jsx(o,{align:"right",children:"Aksi"})]})}),e.jsx(T,{children:i.orders.recentOrders.length===0?e.jsx(c,{children:e.jsx(o,{colSpan:4,align:"center",children:e.jsx(r,{variant:"body2",color:"text.secondary",children:"Tidak ada pesanan"})})}):i.orders.recentOrders.slice(0,5).map(a=>e.jsxs(c,{hover:!0,children:[e.jsx(o,{children:e.jsxs(s,{children:[e.jsx(r,{variant:"body2",fontWeight:500,children:a.user?.full_name||"N/A"}),e.jsx(r,{variant:"caption",color:"text.secondary",children:A(a.created_at)})]})}),e.jsx(o,{children:e.jsx(v,{label:V(a.status),color:M(a.status),size:"small"})}),e.jsx(o,{align:"right",children:e.jsx(r,{variant:"body2",fontWeight:500,children:j(parseFloat(String(a.total_amount)))})}),e.jsx(o,{align:"right",children:e.jsx(W,{title:"Lihat Detail",children:e.jsx(C,{size:"small",onClick:()=>t(`/admin/orders/${a.id}`),children:e.jsx(P,{fontSize:"small"})})})})]},a.id))})]})})]})})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(l,{sx:{borderRadius:3,boxShadow:"0 4px 16px rgba(150, 130, 219, 0.12)"},children:e.jsxs(d,{sx:{p:3},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(f,{sx:{fontSize:"1.5rem",color:"primary.main"}}),e.jsx(r,{variant:"h6",fontWeight:600,children:"Pembayaran Terbaru"})]}),e.jsx(u,{size:"small",onClick:()=>t("/admin/payments"),sx:{textTransform:"none"},children:"Lihat Semua"})]}),e.jsx(w,{children:e.jsxs(I,{size:"small",children:[e.jsx(R,{children:e.jsxs(c,{children:[e.jsx(o,{children:"Customer"}),e.jsx(o,{children:"Status"}),e.jsx(o,{align:"right",children:"Jumlah"}),e.jsx(o,{align:"right",children:"Aksi"})]})}),e.jsx(T,{children:i.payments.recentPayments.length===0?e.jsx(c,{children:e.jsx(o,{colSpan:4,align:"center",children:e.jsx(r,{variant:"body2",color:"text.secondary",children:"Tidak ada pembayaran"})})}):i.payments.recentPayments.slice(0,5).map(a=>e.jsxs(c,{hover:!0,children:[e.jsx(o,{children:e.jsxs(s,{children:[e.jsx(r,{variant:"body2",fontWeight:500,children:a.order?.user?.full_name||"N/A"}),e.jsx(r,{variant:"caption",color:"text.secondary",children:a.payment_date?A(a.payment_date):"N/A"})]})}),e.jsx(o,{children:e.jsx(v,{label:q(a.payment_status),color:$(a.payment_status),size:"small"})}),e.jsx(o,{align:"right",children:e.jsx(r,{variant:"body2",fontWeight:500,children:j(parseFloat(String(a.amount)))})}),e.jsx(o,{align:"right",children:e.jsx(W,{title:"Lihat Detail",children:e.jsx(C,{size:"small",onClick:()=>t(`/admin/payments/${a.id}`),children:e.jsx(P,{fontSize:"small"})})})})]},a.id))})]})})]})})})]})]}):null}export{ae as default};
