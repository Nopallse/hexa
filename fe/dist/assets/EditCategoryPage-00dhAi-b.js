import{q as k,a8 as v,aB as E,r as i,j as e,ag as w,C as u,B as x,an as m,w as I,T as d,A as p}from"./index-tvCmUXkA.js";import{C as B}from"./CategoryForm-5e2FXZ93.js";import{A}from"./Alert-iJ2nvuQL.js";import{B as K}from"./Breadcrumbs-BRY0wQO3.js";import{H as L}from"./Home-FYrVyE1n.js";import"./schemas-DXr8hVXD.js";import"./image-CeHRN-zl.js";import"./CardContent-BO7gwO4c.js";import"./Avatar-Cw6JEpzV.js";import"./useSlot-Dd61XFNI.js";import"./CloudUpload-CzVTKydN.js";import"./Delete-n8OHpdJZ.js";function U(){const a=k(),{id:r}=v(),{showNotification:f}=E(),[s,y]=i.useState(null),[h,c]=i.useState(!0),[b,g]=i.useState(!1),[l,o]=i.useState(null),j=async()=>{if(!r){o("ID kategori tidak valid"),c(!1);return}try{c(!0),o(null);const t=await p.getCategoryById(r);if(t.success)y(t.data);else throw new Error("Failed to fetch category")}catch(t){o(t.message||"Gagal memuat data kategori")}finally{c(!1)}};i.useEffect(()=>{j()},[r]);const C=async t=>{if(r)try{g(!0),o(null);const n=await p.updateCategory(r,t);if(n.success)f({type:"success",message:"Kategori berhasil diperbarui"}),a("/admin/categories");else throw new Error(n.message||"Failed to update category")}catch(n){o(n.message||"Gagal memperbarui kategori")}finally{g(!1)}},S=()=>{a("/admin/categories")};return h?e.jsx(w,{message:"Memuat data kategori..."}):l&&!s?e.jsxs(u,{maxWidth:"lg",children:[e.jsx(A,{severity:"error",sx:{mt:3},children:l}),e.jsx(x,{sx:{mt:2,textAlign:"center"},children:e.jsx(m,{component:"button",onClick:()=>a("/admin/categories"),children:"Kembali ke Daftar Kategori"})})]}):e.jsxs(u,{maxWidth:"lg",children:[e.jsxs(K,{sx:{mb:3},children:[e.jsxs(m,{component:"button",variant:"body2",onClick:()=>a("/admin"),sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(L,{fontSize:"small"}),"Dashboard"]}),e.jsxs(m,{component:"button",variant:"body2",onClick:()=>a("/admin/categories"),sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(I,{fontSize:"small"}),"Kategori"]}),e.jsxs(d,{variant:"body2",color:"textPrimary",children:["Edit ",s?.name]})]}),e.jsxs(x,{sx:{mb:4},children:[e.jsx(d,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:"Edit Kategori"}),e.jsxs(d,{variant:"body1",color:"textSecondary",children:["Perbarui informasi kategori ",s?.name]})]}),s&&e.jsx(B,{mode:"edit",category:s,isLoading:b,error:l,onSubmit:C,onCancel:S})]})}export{U as default};
