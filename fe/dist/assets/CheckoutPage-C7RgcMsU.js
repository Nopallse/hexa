import{a as ie,g as oe,r as c,u as ke,_ as le,ai as Ae,aj as Ee,i as G,j as e,s as Y,k as ce,m as de,c as we,V as Ie,ak as Oe,l as X,W as Te,d as Ge,h as Be,b as Ne,p as me,Z as ze,T as i,B as l,S as Z,ad as qe,M as he,v as O,ah as Le,O as se,E as Ue,x as Q,a4 as ae,D as V,al as Ke,a5 as He,a6 as Ve,af as J,ab as q,H as Ze,ac as Qe,q as Ye,am as Je,a9 as Xe,C as re}from"./index-tvCmUXkA.js";import{u as er}from"./orderStore-CYhWohAJ.js";import{o as fe}from"./orderApi-BOQ5SOkY.js";import{u as ue}from"./useCurrencyConversion-DM705tyN.js";import{C as L,a as U}from"./CardContent-BO7gwO4c.js";import{A as rr}from"./Avatar-Cw6JEpzV.js";import{A as tr,a as te}from"./AreaAutocomplete-mGoLZ_KM.js";import{A as T}from"./Alert-iJ2nvuQL.js";import{E as sr}from"./Edit-EiFO075a.js";import{A as ar}from"./Add-DOZR1gGR.js";import{D as ge,a as ye,b as be}from"./DialogTitle-yi9wgBEI.js";import{F as ne,S as nr}from"./Switch-CnptKaHY.js";import{S as ir}from"./SwitchBase-nOO8HfEz.js";import{D as or}from"./DialogActions-Bmmc9LId.js";import{G as E}from"./Grid-CE62ACEJ.js";import{l as lr}from"./locationApi-DrwoKzm8.js";import{A as je}from"./AttachMoney-Bs0PvlnE.js";import{S as ve}from"./Schedule-DHtlwz_4.js";import{a as cr}from"./image-CeHRN-zl.js";import"./useSlot-Dd61XFNI.js";import"./Popper-DMWFBkOI.js";function dr(r){return ie("MuiFormGroup",r)}oe("MuiFormGroup",["root","row","error"]);const mr=["className","row"],ur=r=>{const{classes:t,row:n,error:o}=r;return de({root:["root",n&&"row",o&&"error"]},dr,t)},xr=Y("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(r,t)=>{const{ownerState:n}=r;return[t.root,n.row&&t.row]}})(({ownerState:r})=>G({display:"flex",flexDirection:"column",flexWrap:"wrap"},r.row&&{flexDirection:"row"})),pr=c.forwardRef(function(t,n){const o=ke({props:t,name:"MuiFormGroup"}),{className:u,row:w=!1}=o,_=le(o,mr),C=Ae(),y=Ee({props:o,muiFormControl:C,states:["error"]}),S=G({},o,{row:w,error:y.error}),k=ur(S);return e.jsx(xr,G({className:ce(k.root,u),ownerState:S,ref:n},_))}),hr=we(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),fr=we(e.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),gr=Y("span",{name:"MuiRadioButtonIcon",shouldForwardProp:Ie})({position:"relative",display:"flex"}),yr=Y(hr,{name:"MuiRadioButtonIcon"})({transform:"scale(1)"}),br=Y(fr,{name:"MuiRadioButtonIcon"})(({theme:r,ownerState:t})=>G({left:0,position:"absolute",transform:"scale(0)",transition:r.transitions.create("transform",{easing:r.transitions.easing.easeIn,duration:r.transitions.duration.shortest})},t.checked&&{transform:"scale(1)",transition:r.transitions.create("transform",{easing:r.transitions.easing.easeOut,duration:r.transitions.duration.shortest})}));function Re(r){const{checked:t=!1,classes:n={},fontSize:o}=r,u=G({},r,{checked:t});return e.jsxs(gr,{className:n.root,ownerState:u,children:[e.jsx(yr,{fontSize:o,className:n.background,ownerState:u}),e.jsx(br,{fontSize:o,className:n.dot,ownerState:u})]})}const We=c.createContext(void 0);function jr(){return c.useContext(We)}function vr(r){return ie("MuiRadio",r)}const _e=oe("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),_r=["checked","checkedIcon","color","icon","name","onChange","size","className"],Sr=r=>{const{classes:t,color:n,size:o}=r,u={root:["root",`color${X(n)}`,o!=="medium"&&`size${X(o)}`]};return G({},t,de(u,vr,t))},Cr=Y(ir,{shouldForwardProp:r=>Ie(r)||r==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(r,t)=>{const{ownerState:n}=r;return[t.root,n.size!=="medium"&&t[`size${X(n.size)}`],t[`color${X(n.color)}`]]}})(({theme:r,ownerState:t})=>G({color:(r.vars||r).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:r.vars?`rgba(${t.color==="default"?r.vars.palette.action.activeChannel:r.vars.palette[t.color].mainChannel} / ${r.vars.palette.action.hoverOpacity})`:Te.alpha(t.color==="default"?r.palette.action.active:r.palette[t.color].main,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${_e.checked}`]:{color:(r.vars||r).palette[t.color].main}},{[`&.${_e.disabled}`]:{color:(r.vars||r).palette.action.disabled}}));function kr(r,t){return typeof t=="object"&&t!==null?r===t:String(r)===String(t)}const Se=e.jsx(Re,{checked:!0}),Ce=e.jsx(Re,{}),Me=c.forwardRef(function(t,n){var o,u;const w=ke({props:t,name:"MuiRadio"}),{checked:_,checkedIcon:C=Se,color:y="primary",icon:S=Ce,name:k,onChange:b,size:x="medium",className:M}=w,I=le(w,_r),z=G({},w,{color:y,size:x}),j=Sr(z),d=jr();let f=_;const g=Oe(b,d&&d.onChange);let $=k;return d&&(typeof f>"u"&&(f=kr(d.value,w.value)),typeof $>"u"&&($=d.name)),e.jsx(Cr,G({type:"radio",icon:c.cloneElement(S,{fontSize:(o=Ce.props.fontSize)!=null?o:x}),checkedIcon:c.cloneElement(C,{fontSize:(u=Se.props.fontSize)!=null?u:x}),ownerState:z,classes:j,name:$,checked:f,onChange:g,ref:n,className:ce(j.root,M)},I))});function wr(r){return ie("MuiRadioGroup",r)}oe("MuiRadioGroup",["root","row","error"]);const Ir=["actions","children","className","defaultValue","name","onChange","value"],zr=r=>{const{classes:t,row:n,error:o}=r;return de({root:["root",n&&"row",o&&"error"]},wr,t)},Pe=c.forwardRef(function(t,n){const{actions:o,children:u,className:w,defaultValue:_,name:C,onChange:y,value:S}=t,k=le(t,Ir),b=c.useRef(null),x=zr(t),[M,I]=Ge({controlled:S,default:_,name:"RadioGroup"});c.useImperativeHandle(o,()=>({focus:()=>{let f=b.current.querySelector("input:not(:disabled):checked");f||(f=b.current.querySelector("input:not(:disabled)")),f&&f.focus()}}),[]);const z=Be(n,b),j=Ne(C),d=c.useMemo(()=>({name:j,onChange(f){I(f.target.value),y&&y(f,f.target.value)},value:M}),[j,y,I,M]);return e.jsx(We.Provider,{value:d,children:e.jsx(pr,G({role:"radiogroup",ref:z,className:ce(x.root,w)},k,{children:u}))})});function Rr({items:r,subtotal:t,shippingCost:n,total:o,onCreateOrder:u,creatingOrder:w,disabled:_,selectedPaymentMethod:C,selectedShippingMethod:y}){const S=me(),k=ze(S.breakpoints.down("md")),{formatPrice:b}=ue();return e.jsx(L,{sx:{position:{xs:"static",lg:"sticky"},top:{lg:24},borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"none"},children:e.jsxs(U,{sx:{p:{xs:2,sm:3}},children:[e.jsx(i,{variant:"h6",fontWeight:600,sx:{mb:{xs:2,sm:3},color:"text.primary",fontSize:{xs:"1rem",sm:"1.25rem"}},children:"Rincian Pembayaran"}),!k&&e.jsxs(l,{sx:{mb:3},children:[e.jsxs(i,{variant:"subtitle1",fontWeight:600,sx:{mb:2,fontSize:{xs:"0.875rem",sm:"1rem"}},children:["Item (",r.length,")"]}),e.jsx(Z,{spacing:2,children:r.map(x=>{const M=x.product_variant.product.product_images?.[0]?.image_name;return e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2,p:{xs:1.5,sm:2},borderRadius:2,backgroundColor:"grey.50"},children:[e.jsx(rr,{src:M||`https://placehold.co/50x50/9682DB/FFFFFF/png?text=${encodeURIComponent(x.product_variant.product.name.substring(0,10))}`,alt:x.product_variant.product.name,sx:{width:{xs:40,sm:50},height:{xs:40,sm:50},borderRadius:2,flexShrink:0,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},variant:"rounded",children:e.jsx(qe,{})}),e.jsxs(l,{sx:{flex:1,minWidth:0},children:[e.jsx(i,{variant:"subtitle2",fontWeight:600,sx:{mb:.5,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:{xs:"0.875rem",sm:"0.9rem"}},title:x.product_variant.product.name,children:x.product_variant.product.name}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.7rem",sm:"0.75rem"}},children:x.product_variant.variant_name}),e.jsxs(i,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.7rem",sm:"0.75rem"}},children:["Qty: ",x.quantity]})]}),e.jsx(i,{variant:"body2",fontWeight:600,color:"primary.main",sx:{fontSize:{xs:"0.875rem",sm:"0.9rem"}},children:b(parseFloat(x.product_variant.price)*x.quantity)})]},x.id)})})]}),e.jsx(he,{sx:{my:{xs:2,sm:2}}}),e.jsxs(Z,{spacing:{xs:1.5,sm:2},children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",py:{xs:1.5,sm:2},px:{xs:1.5,sm:2},backgroundColor:"grey.50",borderRadius:2},children:[e.jsx(i,{variant:"body1",fontWeight:500,sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:"Subtotal"}),e.jsx(i,{variant:"body1",fontWeight:600,sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:b(t)})]}),e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",py:{xs:1.5,sm:2},px:{xs:1.5,sm:2},backgroundColor:"grey.50",borderRadius:2},children:[e.jsxs(l,{children:[e.jsx(i,{variant:"body1",fontWeight:500,sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:"Biaya Pengiriman"}),y&&e.jsx(l,{sx:{display:"flex",alignItems:"center",gap:1,mt:.5,flexWrap:"wrap"},children:e.jsxs(i,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.7rem",sm:"0.75rem"}},children:[y.courier_name," - ",y.courier_service_name]})})]}),e.jsx(i,{variant:"body1",fontWeight:600,sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:b(n)})]}),e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",py:{xs:1.5,sm:2},px:{xs:1.5,sm:2},backgroundColor:"primary.main",borderRadius:2,color:"white"},children:[e.jsx(i,{variant:"h6",fontWeight:600,sx:{fontSize:{xs:"1rem",sm:"1.25rem"}},children:"Total"}),e.jsx(i,{variant:"h6",fontWeight:700,sx:{fontSize:{xs:"1rem",sm:"1.25rem"}},children:b(o)})]})]}),e.jsx(he,{sx:{my:{xs:2,sm:3}}}),e.jsx(O,{variant:"contained",size:"large",startIcon:e.jsx(Le,{}),onClick:u,disabled:_||w,fullWidth:!0,sx:{py:{xs:1.25,sm:1.5},borderRadius:2,fontWeight:600,fontSize:{xs:"0.875rem",sm:"1rem"},minHeight:{xs:44,sm:48},backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"},"&:disabled":{backgroundColor:"grey.300",color:"grey.500"}},children:w?"Membuat Order...":"Buat Order & Bayar"}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mt:2,textAlign:"center",fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:"Dengan melanjutkan, Anda menyetujui syarat dan ketentuan kami"})]})})}function Wr({selectedAddress:r,onAddressSelect:t,onAddressesLoaded:n}){const[o,u]=c.useState([]),[w,_]=c.useState(!0),[C,y]=c.useState(null),[S,k]=c.useState(!1),[b,x]=c.useState(!1),[M,I]=c.useState(!1),[z,j]=c.useState(null),[d,f]=c.useState({recipient_name:"",phone_number:"",address_line:"",city:"",province:"",postal_code:"",country:"ID",is_primary:!1}),[g,$]=c.useState(null),D=[{code:"ID",name:"Indonesia",flag:"ðŸ‡®ðŸ‡©"},{code:"US",name:"United States",flag:"ðŸ‡ºðŸ‡¸"},{code:"SG",name:"Singapore",flag:"ðŸ‡¸ðŸ‡¬"},{code:"MY",name:"Malaysia",flag:"ðŸ‡²ðŸ‡¾"},{code:"TH",name:"Thailand",flag:"ðŸ‡¹ðŸ‡­"},{code:"PH",name:"Philippines",flag:"ðŸ‡µðŸ‡­"},{code:"VN",name:"Vietnam",flag:"ðŸ‡»ðŸ‡³"},{code:"AU",name:"Australia",flag:"ðŸ‡¦ðŸ‡º"},{code:"JP",name:"Japan",flag:"ðŸ‡¯ðŸ‡µ"},{code:"KR",name:"South Korea",flag:"ðŸ‡°ðŸ‡·"}];c.useEffect(()=>{(async()=>{try{_(!0),y(null);const h=await te.getAddresses();if(h.success&&h.data){if(u(h.data),n?.(h.data),h.data.length>0&&!r){const a=h.data.find(p=>p.is_primary)||h.data[0];a&&t(a.id)}}else y("Gagal memuat alamat")}catch(h){console.error("Error fetching addresses:",h),y(h.response?.data?.error||"Gagal memuat alamat")}finally{_(!1)}})()},[]);const P=s=>h=>{f(a=>({...a,[s]:h.target.value}))},F=s=>{$(s),s&&f(h=>({...h,city:s.administrative_division_level_2_name,province:s.administrative_division_level_1_name,postal_code:s.postal_code.toString()}))},B=async()=>{if(!d.recipient_name.trim()){j("Nama penerima wajib diisi");return}if(!d.phone_number.trim()){j("Nomor telepon wajib diisi");return}if(!d.address_line.trim()){j("Alamat lengkap wajib diisi");return}if(!d.city.trim()){j("Kota wajib diisi");return}if(!d.province.trim()){j("Provinsi wajib diisi");return}if(!d.postal_code.trim()){j("Kode pos wajib diisi");return}try{I(!0),j(null);const s=await te.createAddress(d);if(s.success&&s.data){const h=await te.getAddresses();h.success&&h.data&&(u(h.data),n?.(h.data),t(s.data.id)),f({recipient_name:"",phone_number:"",address_line:"",city:"",province:"",postal_code:"",country:"ID",is_primary:!1}),$(null),k(!1)}else j(s.error||"Gagal menambah alamat")}catch(s){console.error("Error creating address:",s),j(s.response?.data?.error||"Gagal menambah alamat")}finally{I(!1)}},N=()=>{f({recipient_name:"",phone_number:"",address_line:"",city:"",province:"",postal_code:"",country:"ID",is_primary:!1}),$(null),k(!1),j(null)};if(w)return e.jsx(L,{sx:{borderRadius:2,boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:e.jsx(U,{sx:{p:3},children:e.jsx(l,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(se,{})})})});const W=o.length>0?o.find(s=>s.id===r)||o.find(s=>s.is_primary)||o[0]:null;return e.jsxs(e.Fragment,{children:[e.jsx(L,{sx:{borderRadius:2,boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:e.jsxs(U,{sx:{p:{xs:2,sm:3}},children:[e.jsx(i,{variant:"h6",fontWeight:600,sx:{mb:{xs:1.5,sm:2},color:"text.primary",fontSize:{xs:"1rem",sm:"1.25rem"}},children:"Alamat Pengiriman"}),C&&e.jsx(T,{severity:"error",sx:{mb:2,borderRadius:2,fontSize:{xs:"0.875rem",sm:"1rem"}},onClose:()=>y(null),children:C}),o.length===0&&e.jsx(T,{severity:"info",sx:{mb:{xs:2,sm:3},borderRadius:2,fontSize:{xs:"0.875rem",sm:"1rem"}},children:"Anda belum memiliki alamat pengiriman. Silakan tambahkan alamat terlebih dahulu."}),W&&e.jsx(l,{sx:{p:{xs:1.5,sm:2},border:"2px solid",borderColor:"primary.main",borderRadius:2,backgroundColor:"action.hover",mb:{xs:1.5,sm:2}},children:e.jsxs(Z,{direction:"row",spacing:{xs:1.5,sm:2},alignItems:"flex-start",children:[e.jsx(Ue,{color:"primary",sx:{mt:.5,flexShrink:0,fontSize:{xs:"1.25rem",sm:"1.5rem"}}}),e.jsxs(l,{sx:{flex:1},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5,flexWrap:"wrap"},children:[e.jsx(i,{variant:"subtitle1",fontWeight:600,sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:W.recipient_name}),W.is_primary&&e.jsx(Q,{label:"Utama",size:"small",color:"primary",sx:{fontSize:{xs:"0.65rem",sm:"0.7rem"},height:{xs:18,sm:20}}})]}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mt:.5,fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:W.phone_number}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mt:1,fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:W.address_line}),e.jsxs(i,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:[W.city,", ",W.province," ",W.postal_code]}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"},mt:.5},children:W.country==="ID"?"ðŸ‡®ðŸ‡© Indonesia":`ðŸŒ ${W.country}`})]})]})}),o.length>1&&W&&!S&&e.jsxs(O,{variant:"outlined",startIcon:e.jsx(sr,{}),onClick:()=>x(!0),fullWidth:!0,sx:{mb:{xs:1.5,sm:2},py:{xs:1,sm:1.25},borderRadius:2,fontWeight:500,fontSize:{xs:"0.875rem",sm:"1rem"},minHeight:{xs:40,sm:44},textTransform:"none"},children:["Ganti Alamat (",o.length," alamat tersedia)"]}),!S&&e.jsx(O,{variant:o.length===0?"contained":"outlined",startIcon:e.jsx(ar,{}),onClick:()=>k(!0),fullWidth:!0,sx:{py:{xs:1.25,sm:1.5},borderRadius:2,fontWeight:o.length===0?600:500,fontSize:{xs:"0.875rem",sm:"1rem"},minHeight:{xs:44,sm:48},...o.length===0&&{backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"}}},children:o.length===0?"Tambah Alamat":"Tambah Alamat Baru"})]})}),e.jsxs(ge,{open:b,onClose:()=>x(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2}},children:[e.jsx(ye,{children:e.jsx(i,{variant:"h6",fontWeight:600,sx:{fontSize:{xs:"1rem",sm:"1.25rem"}},children:"Pilih Alamat Pengiriman"})}),e.jsx(be,{sx:{p:{xs:2,sm:3}},children:e.jsx(ae,{component:"fieldset",fullWidth:!0,children:e.jsx(Pe,{value:r||"",onChange:s=>{t(s.target.value),x(!1)},children:e.jsx(Z,{spacing:2,children:o.map(s=>e.jsx(L,{sx:{border:r===s.id?"2px solid":"1px solid",borderColor:r===s.id?"primary.main":"grey.300",backgroundColor:r===s.id?"primary.light":"white",transition:"all 0.2s ease",cursor:"pointer","&:hover":{borderColor:"primary.main",backgroundColor:"primary.light"}},onClick:()=>{t(s.id),x(!1)},children:e.jsxs(U,{sx:{p:{xs:1.5,sm:2}},children:[e.jsx(ne,{value:s.id,control:e.jsx(Me,{}),label:"",sx:{m:0}}),e.jsxs(l,{sx:{ml:{xs:3,sm:4}},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5,flexWrap:"wrap"},children:[e.jsx(i,{variant:"subtitle1",fontWeight:600,sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:s.recipient_name}),s.is_primary&&e.jsx(Q,{label:"Utama",size:"small",color:"primary",sx:{fontSize:{xs:"0.65rem",sm:"0.7rem"},height:{xs:18,sm:20}}})]}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:.5,fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:s.phone_number}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:.5,fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:s.address_line}),e.jsxs(i,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:[s.city,", ",s.province," ",s.postal_code]}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"},mt:.5},children:s.country==="ID"?"ðŸ‡®ðŸ‡© Indonesia":`ðŸŒ ${s.country}`})]})]})},s.id))})})})}),e.jsx(or,{sx:{p:{xs:2,sm:3},pt:0},children:e.jsx(O,{onClick:()=>x(!1),variant:"outlined",sx:{borderRadius:2,textTransform:"none",fontWeight:500,fontSize:{xs:"0.875rem",sm:"1rem"}},children:"Batal"})})]}),e.jsxs(ge,{open:S,onClose:N,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:2}},children:[e.jsx(ye,{children:e.jsx(i,{variant:"h6",fontWeight:600,children:"Tambah Alamat Baru"})}),e.jsxs(be,{sx:{p:3},children:[z&&e.jsx(T,{severity:"error",sx:{mb:3,borderRadius:2},onClose:()=>j(null),children:z}),e.jsxs(E,{container:!0,spacing:3,children:[e.jsx(E,{item:!0,xs:12,sm:6,children:e.jsx(V,{fullWidth:!0,label:"Nama Penerima",value:d.recipient_name,onChange:P("recipient_name"),variant:"outlined",required:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),e.jsx(E,{item:!0,xs:12,sm:6,children:e.jsx(V,{fullWidth:!0,label:"Nomor Telepon",value:d.phone_number,onChange:P("phone_number"),variant:"outlined",required:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),e.jsx(E,{item:!0,xs:12,children:e.jsx(V,{fullWidth:!0,label:"Alamat Lengkap",value:d.address_line,onChange:P("address_line"),variant:"outlined",placeholder:"Masukkan alamat lengkap (nama jalan, nomor rumah, dll)",required:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),e.jsx(E,{item:!0,xs:12,children:e.jsxs(ae,{fullWidth:!0,children:[e.jsx(Ke,{children:"Negara"}),e.jsx(He,{value:d.country,onChange:s=>{f(h=>({...h,country:s.target.value,city:"",province:"",postal_code:""})),$(null)},sx:{borderRadius:2},children:D.map(s=>e.jsx(Ve,{value:s.code,children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx("span",{children:s.flag}),e.jsx("span",{children:s.name})]})},s.code))})]})}),e.jsx(E,{item:!0,xs:12,children:d.country==="ID"?e.jsx(tr,{label:"Pilih Area",placeholder:"Ketik nama kota, kecamatan, atau kode pos...",value:g,onChange:F,required:!0,countries:"ID",limit:10}):e.jsx(V,{fullWidth:!0,label:"Manual Address Entry",placeholder:"Enter address details manually for international addresses",variant:"outlined",disabled:!0,helperText:`Area autocomplete is only available for Indonesia. Please fill the fields below manually for ${D.find(s=>s.code===d.country)?.name}.`,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),e.jsx(E,{item:!0,xs:12,sm:6,children:e.jsx(V,{fullWidth:!0,label:"Kota",value:d.city,onChange:P("city"),variant:"outlined",disabled:d.country==="ID"&&!!g,helperText:d.country==="ID"&&g?"Otomatis terisi dari area yang dipilih":d.country==="ID"?"Masukkan nama kota atau pilih dari area autocomplete":`Masukkan nama kota untuk ${D.find(s=>s.code===d.country)?.name}`,required:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),e.jsx(E,{item:!0,xs:12,sm:6,children:e.jsx(V,{fullWidth:!0,label:"Provinsi/State",value:d.province,onChange:P("province"),variant:"outlined",disabled:d.country==="ID"&&!!g,helperText:d.country==="ID"&&g?"Otomatis terisi dari area yang dipilih":d.country==="ID"?"Masukkan nama provinsi atau pilih dari area autocomplete":`Masukkan nama provinsi/state untuk ${D.find(s=>s.code===d.country)?.name}`,required:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),e.jsx(E,{item:!0,xs:12,sm:6,children:e.jsx(V,{fullWidth:!0,label:"Kode Pos/ZIP Code",value:d.postal_code,onChange:P("postal_code"),variant:"outlined",disabled:d.country==="ID"&&!!g,helperText:d.country==="ID"&&g?"Otomatis terisi dari area yang dipilih":d.country==="ID"?"Masukkan kode pos atau pilih dari area autocomplete":`Masukkan kode pos/ZIP code untuk ${D.find(s=>s.code===d.country)?.name}`,required:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),e.jsx(E,{item:!0,xs:12,children:e.jsx(ne,{control:e.jsx(nr,{checked:d.is_primary,onChange:s=>f(h=>({...h,is_primary:s.target.checked})),color:"primary"}),label:e.jsxs(l,{children:[e.jsx(i,{variant:"body1",fontWeight:500,children:"Set sebagai Alamat Utama"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:d.is_primary?"Alamat ini akan menjadi alamat utama untuk pengiriman":"Alamat ini akan menjadi alamat tambahan"})]}),sx:{alignItems:"flex-start",mt:1}})})]}),g&&e.jsxs(l,{sx:{mt:3,p:2,backgroundColor:"primary.light",borderRadius:2},children:[e.jsx(i,{variant:"subtitle2",fontWeight:600,sx:{mb:1,color:"primary.dark"},children:"Area yang Dipilih:"}),e.jsxs(i,{variant:"body2",sx:{color:"primary.dark"},children:[g.administrative_division_level_3_name,", ",g.administrative_division_level_2_name,", ",g.administrative_division_level_1_name," - ",g.postal_code]})]}),e.jsxs(l,{sx:{display:"flex",gap:2,mt:4,justifyContent:"flex-end"},children:[e.jsx(O,{variant:"outlined",onClick:N,disabled:M,sx:{borderRadius:2,textTransform:"none",fontWeight:500},children:"Batal"}),e.jsx(O,{variant:"contained",onClick:B,disabled:M,sx:{borderRadius:2,textTransform:"none",fontWeight:500,backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"}},children:M?e.jsx(se,{size:20}):"Simpan"})]})]})]})]})}const Mr={getShippingRates:async r=>{try{const t=await J.post("/shipping/rates",r);return{success:!0,data:t.data.data,provider:t.data.provider,origin_country:t.data.origin_country,destination_country:t.data.destination_country}}catch(t){return{success:!1,error:t.response?.data?.error||"Failed to fetch shipping rates"}}},getAreas:async(r={})=>{try{return{success:!0,data:(await J.get("/shipping/areas",{params:r})).data.data}}catch(t){return{success:!1,error:t.response?.data?.error||"Failed to fetch areas"}}},trackShipment:async(r,t)=>{try{const n=t?{courier:t}:{},o=await J.get(`/shipping/track/${r}`,{params:n});return{success:!0,data:o.data.data,provider:o.data.provider}}catch(n){return{success:!1,error:n.response?.data?.error||"Failed to track shipment"}}},trackFedExShipment:async r=>{try{const t=await J.get(`/shipping/track/fedex/${r}`);return{success:!0,data:t.data.data,provider:t.data.provider}}catch(t){return{success:!1,error:t.response?.data?.error||"Failed to track FedEx shipment"}}}};function Pr(r,t){const[n,o]=c.useState(r);return c.useEffect(()=>{const u=setTimeout(()=>{o(r)},t);return()=>{clearTimeout(u)}},[r,t]),n}const $r=r=>{const n=r.trim().replace(/\s*days?\s*$/i,"").split(/\s*-\s*/),o=parseInt(n[0],10),u=n.length>1?parseInt(n[1],10):o;return{min_day:isNaN(o)?1:o,max_day:isNaN(u)?o||3:u}},Dr=r=>{const t=$r(r.shipment_duration_range||r.duration||"1 - 3");let n="standard";return r.service_type==="overnight"?n="overnight":r.service_type==="express"?n="express":r.service_type==="economy"&&(n="economy"),{courier_name:r.courier_name||r.company||"",courier_code:r.courier_code||r.company||"",courier_service_name:r.courier_service_name||"",courier_service_code:r.courier_service_code||r.type||"",service_type:n,description:r.description||"",shipping_type:r.shipping_type||"parcel",ship_type:r.shipping_type||"parcel",service_name:r.courier_service_name||"",price:r.price||r.shipping_fee||0,currency:r.currency||"IDR",type:r.type||r.courier_service_code||"",min_day:t.min_day,max_day:t.max_day,provider:"biteship"}};function Fr({selectedAddress:r,cartItems:t,selectedMethod:n,onMethodSelect:o}){const u=me(),{formatPrice:w}=ue(),[_,C]=c.useState([]),[y,S]=c.useState(!1),[k,b]=c.useState(null),[x,M]=c.useState(null),[I,z]=c.useState(null),[j,d]=c.useState(""),[f,g]=c.useState(!1),[$,D]=c.useState(!1),P=q.useMemo(()=>t.map(a=>({name:a.product_variant.product.name,description:a.product_variant.product.description||"",length:a.product_variant.product.length||10,width:a.product_variant.product.width||10,height:a.product_variant.product.height||1,weight:a.product_variant.product.weight||a.product_variant.weight||1e3,quantity:a.quantity,value:a.product_variant.price*a.quantity})),[t]),F=q.useMemo(()=>r?`${r.id}_${r.country}_${r.postal_code}`:null,[r?.id,r?.country,r?.postal_code]),B=q.useMemo(()=>P.reduce((a,p)=>a+p.weight*p.quantity,0),[P]),N=q.useMemo(()=>!r||t.length===0?null:`${F}_${B}_${P.length}`,[F,B,P.length,t.length]);Pr(N,500),c.useEffect(()=>{(async()=>{try{const p=await lr.getActiveOriginLocation();p.success&&p.data&&z(p.data)}catch(p){console.error("Failed to fetch active origin:",p)}})()},[]),c.useEffect(()=>{(async()=>{if(!r||!I||t.length===0){C([]),b(null);return}const p=`${r.id}_${r.postal_code}_${B}_${P.length}`;if(p!==x)try{S(!0),b(null),M(p);const v=await Mr.getShippingRates({origin_postal_code:I.postal_code,destination_postal_code:r.postal_code,origin_country:"ID",destination_country:r.country,items:P});if(p===x||!x)if(v.success&&v.data){const H=(v.data.pricing||[]).map(K=>Dr(K));if(H.sort((K,A)=>K.price-A.price),C(H),d(v.provider||""),g(r.country!=="ID"),H.length>0&&!n){const K=H[0];o(K)}}else b(v.error||"Failed to fetch shipping rates"),C([])}catch(v){(p===x||!x)&&(b(v.message||"Failed to fetch shipping rates"),C([]))}finally{S(!1)}})()},[r,I,t.length,B,P.length]),q.useEffect(()=>()=>{S(!1),b(null)},[]);const W=(a,p)=>a===p?`${a} hari`:`${a}-${p} hari`,s=a=>{switch(a){case"express":case"overnight":return"error";case"standard":return"primary";case"economy":return"success";default:return"default"}},h=a=>{switch(a){case"express":return"Express";case"standard":return"Standard";case"economy":return"Economy";case"overnight":return"Overnight";default:return a}};return r?e.jsx(L,{sx:{borderRadius:2,boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:e.jsxs(U,{sx:{p:{xs:2,sm:3}},children:[e.jsx(l,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:{xs:2,sm:3},flexWrap:"wrap",gap:1},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Ze,{sx:{fontSize:{xs:"1.25rem",sm:"1.5rem"},mr:1,color:"primary.main"}}),e.jsx(i,{variant:"h6",fontWeight:600,sx:{fontSize:{xs:"1rem",sm:"1.25rem"}},children:"Opsi Pengiriman"})]})}),e.jsxs(l,{sx:{mb:{xs:2,sm:3},p:{xs:1.5,sm:2},backgroundColor:"grey.50",borderRadius:2},children:[e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:1,fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:"Alamat Pengiriman:"}),e.jsx(i,{variant:"body1",fontWeight:500,sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:r.recipient_name}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:r.address_line}),e.jsxs(i,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:[r.city,", ",r.province," ",r.postal_code]}),e.jsxs(i,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:[r.country==="ID"?"ðŸ‡®ðŸ‡© Indonesia":`ðŸŒ ${r.country}`,f&&e.jsx(Q,{label:"Internasional",size:"small",color:"warning",variant:"outlined",sx:{ml:1,fontSize:{xs:"0.65rem",sm:"0.7rem"},height:{xs:18,sm:20}}})]})]}),y&&e.jsxs(l,{sx:{display:"flex",justifyContent:"center",py:3},children:[e.jsx(se,{size:24}),e.jsx(i,{variant:"body2",sx:{ml:2},children:"Mencari opsi pengiriman..."})]}),k&&e.jsxs(T,{severity:"error",sx:{mb:3},children:[k,e.jsx(O,{size:"small",onClick:()=>{M(null),b(null)},sx:{ml:2},children:"Coba Lagi"})]}),!y&&!k&&_.length>0&&e.jsxs(ae,{component:"fieldset",fullWidth:!0,children:[e.jsx(Qe,{component:"legend",sx:{mb:2,fontWeight:600},children:"Metode Pengiriman"}),!$&&n&&(()=>{const a=_.find(p=>`${p.courier_code}_${p.courier_service_code}`===n);return a?e.jsxs(l,{sx:{mb:2},children:[e.jsx(L,{sx:{border:`2px solid ${u.palette.primary.main}`,backgroundColor:"white",borderRadius:2,boxShadow:`0 2px 8px ${u.palette.primary.main}20`,transition:"all 0.2s ease",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,width:4,height:"100%",backgroundColor:u.palette.primary.main}},children:e.jsxs(U,{sx:{p:{xs:2.5,sm:3},pl:{xs:3,sm:3.5}},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1.5,flexWrap:"wrap",gap:1},children:[e.jsx(i,{variant:"h6",fontWeight:700,sx:{fontSize:{xs:"1rem",sm:"1.125rem"},color:"text.primary"},children:a.courier_name}),e.jsx(l,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:e.jsx(Q,{label:h(a.service_type),color:s(a.service_type),size:"small",sx:{fontSize:{xs:"0.7rem",sm:"0.75rem"},height:{xs:22,sm:26},fontWeight:600}})})]}),a.description&&e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:2,fontSize:{xs:"0.8rem",sm:"0.875rem"},lineHeight:1.5},children:a.description}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:{xs:2,sm:3},flexWrap:"wrap",pt:1.5,borderTop:"1px solid",borderColor:"grey.200"},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(je,{sx:{fontSize:{xs:"1.125rem",sm:"1.25rem"},color:"success.main"}}),e.jsx(i,{variant:"h6",fontWeight:700,color:"success.main",sx:{fontSize:{xs:"1rem",sm:"1.125rem"}},children:w(a.price,a.currency||"IDR")})]}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ve,{sx:{fontSize:{xs:"1rem",sm:"1.125rem"},color:"text.secondary"}}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.8rem",sm:"0.875rem"},fontWeight:500},children:W(a.min_day,a.max_day)})]})]})]})}),_.length>1&&e.jsxs(O,{variant:"outlined",fullWidth:!0,onClick:()=>D(!0),sx:{mt:2,py:1,borderRadius:2,textTransform:"none",fontWeight:500,fontSize:{xs:"0.875rem",sm:"0.9rem"}},children:["Lihat Semua Opsi (",_.length,")"]})]}):null})(),$&&e.jsxs(l,{children:[e.jsx(Pe,{value:n||"",onChange:a=>{const p=_.find(v=>`${v.courier_code}_${v.courier_service_code}`===a.target.value);p&&(o(p),D(!1))},children:e.jsx(Z,{spacing:2,children:_.map(a=>{const p=`${a.courier_code}_${a.courier_service_code}`,v=n===p;return e.jsx(L,{sx:{border:v?`2px solid ${u.palette.primary.main}`:"1px solid",borderColor:v?"primary.main":"grey.300",backgroundColor:"white",borderRadius:2,boxShadow:v?`0 2px 8px ${u.palette.primary.main}20`:"0 1px 3px rgba(0,0,0,0.1)",transition:"all 0.2s ease",cursor:"pointer",position:"relative",overflow:"hidden","&::before":v?{content:'""',position:"absolute",top:0,left:0,width:4,height:"100%",backgroundColor:u.palette.primary.main}:{},"&:hover":{borderColor:"primary.main",backgroundColor:"grey.50",boxShadow:`0 2px 8px ${u.palette.primary.main}20`,transform:"translateY(-2px)","&::before":{content:'""',position:"absolute",top:0,left:0,width:4,height:"100%",backgroundColor:u.palette.primary.main}},"&:active":{transform:"translateY(0)"}},onClick:()=>{`${a.courier_code}${a.courier_service_code}`,o(a),D(!1)},children:e.jsxs(U,{sx:{p:{xs:2.5,sm:3},pl:{xs:3,sm:v?3.5:2.5}},children:[e.jsx(ne,{value:p,control:e.jsx(Me,{}),label:"",sx:{m:0,position:"absolute",top:{xs:16,sm:20},left:{xs:8,sm:12}}}),e.jsxs(l,{sx:{ml:{xs:3,sm:4}},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1.5,flexWrap:"wrap",gap:1},children:[e.jsx(i,{variant:"h6",fontWeight:v?700:600,sx:{fontSize:{xs:"1rem",sm:"1.125rem"},color:"text.primary"},children:a.courier_name}),e.jsx(l,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:e.jsx(Q,{label:h(a.service_type),color:s(a.service_type),size:"small",sx:{fontSize:{xs:"0.7rem",sm:"0.75rem"},height:{xs:22,sm:26},fontWeight:600}})})]}),a.description&&e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:2,fontSize:{xs:"0.8rem",sm:"0.875rem"},lineHeight:1.5},children:a.description}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:{xs:2,sm:3},flexWrap:"wrap",pt:1.5,borderTop:"1px solid",borderColor:"grey.200"},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(je,{sx:{fontSize:{xs:"1.125rem",sm:"1.25rem"},color:"success.main"}}),e.jsx(i,{variant:"h6",fontWeight:700,color:"success.main",sx:{fontSize:{xs:"1rem",sm:"1.125rem"}},children:w(a.price,a.currency||"IDR")})]}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ve,{sx:{fontSize:{xs:"1rem",sm:"1.125rem"},color:"text.secondary"}}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.8rem",sm:"0.875rem"},fontWeight:500},children:W(a.min_day,a.max_day)})]})]})]})]})},p)})})}),e.jsx(O,{variant:"outlined",fullWidth:!0,onClick:()=>D(!1),sx:{mt:2,py:1,borderRadius:2,textTransform:"none",fontWeight:500,fontSize:{xs:"0.875rem",sm:"0.9rem"}},children:"Tutup"})]})]}),!y&&!k&&_.length===0&&e.jsx(T,{severity:"warning",children:"Tidak ada opsi pengiriman tersedia untuk alamat inii"})]})}):e.jsx(L,{children:e.jsx(U,{children:e.jsx(T,{severity:"info",children:"Pilih alamat pengiriman terlebih dahulu untuk melihat opsi pengiriman"})})})}function st(){const r=me(),t=ze(r.breakpoints.down("md")),n=Ye(),o=Je(),{formatPrice:u,loading:w,error:_}=ue(),[C,y]=c.useState(!0),[S,k]=c.useState(!1),[b,x]=c.useState(!1),[M,I]=c.useState(null),[z,j]=c.useState(null),[d,f]=c.useState(null),[g,$]=c.useState([]),[D,P]=c.useState("midtrans"),[F,B]=c.useState(null),[N,W]=c.useState(15e3),[s,h]=c.useState([]),{items:a,clearCart:p,syncWithServer:v}=Xe(),{addOrder:xe,setPaymentMethods:H,paymentMethods:K}=er();c.useEffect(()=>{const m=o.state;m?.selectedCartItemIds?h(m.selectedCartItemIds):n("/cart")},[o.state,n]);const A=q.useMemo(()=>{const m=a.filter(R=>R.product_variant.product.deleted_at===null);return s.length===0?m:m.filter(R=>s.includes(R.id))},[a,s]),ee=q.useMemo(()=>A.reduce((m,R)=>m+parseFloat(R.product_variant.price)*R.quantity,0),[A]),$e=q.useMemo(()=>ee+N,[ee,N]),pe=q.useCallback(async()=>{try{const m=await fe.getPaymentMethods();m.success&&H(m.data)}catch(m){console.error("Error fetching payment methods:",m)}},[H]),De=async()=>{if(!z){I("Pilih alamat pengiriman terlebih dahulu");return}if(A.length===0){I("Tidak ada item yang tersedia untuk checkout");return}if(s.length===0){I("Tidak ada item yang dipilih untuk checkout");return}try{k(!0),I(null);const m=await fe.createOrder({address_id:z,shipping_cost:N,cart_item_ids:s,courier_code:F?.courier_code,courier_service_code:F?.courier_service_code});m.success&&(xe(m.data),x(!0),n(`/orders/${m.data.order_id}`,{state:{message:"Order berhasil dibuat! Silakan lakukan pembayaran.",selectedPaymentMethod:D}}))}catch(m){console.error("Error creating order:",m),I(m.response?.data?.error||"Gagal membuat order")}finally{k(!1)}};return c.useEffect(()=>{(async()=>{try{await v()}catch(R){console.error("Error syncing cart:",R)}})()},[v]),c.useEffect(()=>{if(s.length===0&&!S&&!b&&!C){n("/cart");return}K.length===0&&pe(),C&&y(!1)},[s.length,n,S,b,pe,K.length,C]),c.useEffect(()=>{if(z&&g.length>0){const m=g.find(R=>R.id===z);m&&(!d||d.id!==m.id)&&f(m)}else if(!z&&g.length>0&&!d){const m=g.find(R=>R.is_primary)||g[0];m&&(j(m.id),f(m))}},[z,g,d]),C?e.jsx(l,{sx:{minHeight:"100vh",py:4},children:e.jsx(re,{maxWidth:"xl",children:e.jsx(i,{children:"Loading..."})})}):A.length===0?e.jsx(l,{sx:{minHeight:"100vh",py:4},children:e.jsxs(re,{maxWidth:"xl",children:[e.jsx(T,{severity:"warning",sx:{mb:4},children:"Tidak ada item yang tersedia untuk checkout. Semua item di keranjang sudah tidak tersedia."}),e.jsx(O,{variant:"contained",onClick:()=>n("/cart"),children:"Kembali ke Keranjang"})]})}):e.jsx(l,{sx:{minHeight:"100vh",py:{xs:2,sm:4}},children:e.jsxs(re,{maxWidth:"xl",sx:{px:{xs:2,sm:3}},children:[e.jsxs(l,{sx:{mb:{xs:2,sm:3}},children:[e.jsx(i,{variant:"h4",fontWeight:600,sx:{mb:1,color:"text.primary",fontSize:{xs:"1.5rem",sm:"2rem"}},children:"Checkout"}),e.jsx(i,{variant:"body1",color:"text.secondary",sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:"Lengkapi informasi pengiriman dan pembayaran"})]}),M&&e.jsx(T,{severity:"error",sx:{mb:{xs:2,sm:4},fontSize:{xs:"0.875rem",sm:"1rem"}},onClose:()=>I(null),children:M}),w&&e.jsx(T,{severity:"info",sx:{mb:2,fontSize:{xs:"0.875rem",sm:"1rem"}},children:"Loading exchange rates..."}),_&&e.jsx(T,{severity:"warning",sx:{mb:2,fontSize:{xs:"0.875rem",sm:"1rem"}},children:"Failed to load exchange rates. Prices will be displayed in default currency."}),e.jsxs(l,{sx:{display:"flex",flexDirection:{xs:"column",lg:"row"},gap:{xs:2,sm:4},alignItems:"flex-start"},children:[e.jsx(l,{sx:{flex:1,minWidth:0,width:"100%",order:{xs:1,lg:1}},children:e.jsxs(Z,{spacing:{xs:2,sm:4},children:[e.jsx(l,{sx:{order:{xs:1,lg:1}},children:e.jsx(Wr,{selectedAddress:z,onAddressSelect:m=>{j(m);const R=g.find(Fe=>Fe.id===m);R&&f(R),B(null),W(15e3)},onAddressesLoaded:m=>{$(m)}})}),t&&e.jsx(l,{sx:{order:{xs:2,lg:2}},children:e.jsx(L,{sx:{borderRadius:2,boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:e.jsxs(U,{sx:{p:{xs:2,sm:3}},children:[e.jsxs(i,{variant:"h6",fontWeight:600,sx:{mb:2,fontSize:{xs:"1rem",sm:"1.25rem"}},children:["Produk (",A.length,")"]}),e.jsx(Z,{spacing:2,children:A.map(m=>{const R=m.product_variant.product.product_images?.[0]?.image_name;return e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2,p:1.5,borderRadius:2,backgroundColor:"grey.50"},children:[e.jsx(l,{component:"img",src:R?cr(R):void 0,alt:m.product_variant.product.name,sx:{width:{xs:50,sm:60},height:{xs:50,sm:60},borderRadius:1,objectFit:"cover",flexShrink:0,backgroundColor:"grey.100"}}),e.jsxs(l,{sx:{flex:1,minWidth:0},children:[e.jsx(i,{variant:"subtitle2",fontWeight:600,sx:{mb:.5,fontSize:{xs:"0.875rem",sm:"0.9rem"},overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:m.product_variant.product.name,children:m.product_variant.product.name}),e.jsxs(i,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",sm:"0.8rem"}},children:["Qty: ",m.quantity]})]}),e.jsx(i,{variant:"body2",fontWeight:600,color:"primary.main",sx:{fontSize:{xs:"0.875rem",sm:"0.9rem"}},children:u(parseFloat(m.product_variant.price)*m.quantity)})]},m.id)})})]})})}),e.jsx(l,{sx:{order:{xs:3,lg:3}},children:e.jsx(Fr,{selectedAddress:d,cartItems:A,selectedMethod:F?`${F.courier_code}_${F.courier_service_code}`:null,onMethodSelect:m=>{B(m),W(m.price)}})})]})}),e.jsx(l,{sx:{width:{xs:"100%",lg:"400px"},flexShrink:0,order:{xs:4,lg:2}},children:e.jsx(Rr,{items:A,subtotal:ee,shippingCost:N,total:$e,onCreateOrder:De,creatingOrder:S,disabled:!z||!F,selectedPaymentMethod:D,selectedShippingMethod:F})})]})]})})}export{st as default};
